#
# Test "mysqladmin ping"
#

--exec $MYSQLADMIN --port=$MASTER_MYPORT  --user=root --password= ping 2>&1


#
# Bug#10608 mysqladmin breaks on "database" variable in my.cnf
#

# When mysqladmin finds database in .cnf file it shall fail
--write_file $MYSQLTEST_VARDIR/tmp/bug10608.cnf
[client]
database=db1
EOF

--replace_regex /.*drizzleadmin.*: unknown/drizzleadmin: unknown/
--error 7
--exec $MYSQLADMIN --defaults-file=$MYSQLTEST_VARDIR/tmp/bug10608.cnf --port=$MASTER_MYPORT  --user=root --password= ping 2>&1
remove_file $MYSQLTEST_VARDIR/tmp/bug10608.cnf;

# When mysqladmin finds "loose-database" in .cnf file it shall print
# a warning and continue
--write_file $MYSQLTEST_VARDIR/tmp/bug10608.cnf
[client]
loose-database=db2
EOF

--replace_regex /Warning: .*drizzleadmin.*: unknown/Warning: drizzleadmin: unknown/
--exec $MYSQLADMIN --defaults-file=$MYSQLTEST_VARDIR/tmp/bug10608.cnf --port=$MASTER_MYPORT  --user=root --password= ping 2>&1

remove_file $MYSQLTEST_VARDIR/tmp/bug10608.cnf;
