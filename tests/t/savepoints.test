# Tests of various SAVEPOINT functionality

# Test for Bug #534806 - SAVEPOINT without active transaction
# triggers assert in InnoDB handler

SET AUTOCOMMIT = 0;
CREATE TABLE t1 (id INT NOT NULL PRIMARY KEY);
COMMIT;
UPDATE t1 SET id = 2 WHERE id != 2 LIMIT 0;
SAVEPOINT A;

DROP TABLE t1;

# Let's test the non-edge case for SAVEPOINTS:
#
# Typical usage pattern of starting a transaction, doing
# some work, savepointing, do more work, savepointing, etc
# and committing without any rollbacks or savepoint releases.

CREATE TABLE t1 (id INT NOT NULL PRIMARY KEY);

START TRANSACTION;

INSERT INTO t1 VALUES (1);

SAVEPOINT A;

INSERT INTO t1 VALUES (2);

SAVEPOINT B;

INSERT INTO t1 VALUES (3);

COMMIT;

# t1 should now have 1,2,3 in it.
SELECT * FROM t1;

# We now test another typical usage pattern, similar to above,
# but we issue a ROLLBACK at the end instead of a COMMIT.  All
# work done in all savepoints should be rolled back.

START TRANSACTION;

INSERT INTO t1 VALUES (4);

SAVEPOINT A;

INSERT INTO t1 VALUES (5);

SAVEPOINT B;

INSERT INTO t1 VALUES (6);

ROLLBACK;

# t1 should still have 1,2,3 in it.
SELECT * FROM t1;

# We now test the final typical usage pattern, where we
# ROLLBACK work to a specific SAVEPOINT and then COMMIT.

START TRANSACTION;

INSERT INTO t1 VALUES (4);

SAVEPOINT A;

INSERT INTO t1 VALUES (5);

SAVEPOINT B;

INSERT INTO t1 VALUES (6);

ROLLBACK TO SAVEPOINT A;

COMMIT;

# t1 should have 1,2,3,4 in it.
SELECT * FROM t1;

DROP TABLE t1;

# 
# Test for Bug #542299
#
# segfault on ROLLBACK TO SAVEPOINT A - during randgen
#
--echo Start Test of Bug 542299
CREATE TABLE t1 (a int,id integer auto_increment,b int,/*Indices*/key (a ),primary key (id)) ENGINE=innodb;
ALTER TABLE t1 DISABLE KEYS;
INSERT INTO t1 VALUES  (100, NULL, 100) ,  (100, NULL, 100) ,  (100, NULL, 100) ,  (100, NULL, 100) ,  (100, NULL, 100) ,  (100, NULL, 100) ,  (100, NULL, 100) ,  (100, NULL, 100);
COMMIT;
CREATE TABLE t2 (a int,b int,id integer auto_increment,/*Indices*/key (a ),primary key (id)) ENGINE=innodb;
ALTER TABLE t2 DISABLE KEYS;
SHOW WARNINGS;
INSERT INTO t2 VALUES  (100, 100, NULL) ,  (100, 100, NULL) ,  (100, 100, NULL) ,  (100, 100, NULL) ,  (100, 100, NULL) ,  (100, 100, NULL) ,  (100, 100, NULL) ,  (100, 100, NULL);
INSERT INTO t2 VALUES  (100, 100, NULL) ,  (100, 100, NULL) ,  (100, 100, NULL) ,  (100, 100, NULL) ,  (100, 100, NULL) ,  (100, 100, NULL) ,  (100, 100, NULL) ,  (100, 100, NULL);
COMMIT;
ALTER TABLE t2 ENABLE KEYS;
SHOW WARNINGS;
COMMIT;
SET GLOBAL TRANSACTION ISOLATION LEVEL REPEATABLE READ;
SET AUTOCOMMIT=OFF;
SELECT id FROM t1 WHERE b BETWEEN 1 and 5;
SELECT id FROM t1 WHERE b BETWEEN 1 and 5 /* no additional predicate */;
SELECT id FROM t1 WHERE b BETWEEN 1 and 5 AND id > -16777216;
UPDATE t1 SET a = 0 WHERE 1 = 1 LIMIT 4;
UPDATE t1 SET id = 0 WHERE id BETWEEN 0 and 1 LIMIT 1;
UPDATE t1 SET a = 5 WHERE a < 7 LIMIT 6;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 7 );
DELETE FROM t2 WHERE 1 = 1 LIMIT 5;
SAVEPOINT A;
START TRANSACTION;
INSERT INTO t1 ( a, b ) VALUES ( 5 , 1 );
INSERT INTO t1 ( a, b ) VALUES ( 5 , 9 );
SELECT id FROM t2 WHERE id IN ( 1 , 2 , 1 );
SELECT id FROM t2 WHERE id IN ( 1 , 2 , 1 ) /* no additional predicate */;
SELECT id FROM t2 WHERE id IN ( 1 , 2 , 1 ) AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 0 , 2 );
UPDATE t1 SET b = 1 WHERE 1 = 1 LIMIT 0;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 6 );
--error 1305
ROLLBACK TO SAVEPOINT A;
INSERT INTO t1 ( a, b ) VALUES ( 7 , 5 );
SELECT b FROM t1 WHERE a IN ( 3 , 9 , 0 );
SELECT b FROM t1 WHERE a IN ( 3 , 9 , 0 ) /* no additional predicate */;
SELECT b FROM t1 WHERE a IN ( 3 , 9 , 0 ) AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 8 , 9 );
SAVEPOINT A;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 2 );
UPDATE t2 SET a = 0 WHERE a < 1 LIMIT 4;
UPDATE t1 SET b = 1 WHERE a = 4 LIMIT 7;
DELETE FROM t2 WHERE id < 1 LIMIT 1;
--error 1062
UPDATE t1 SET id = 5 WHERE b = 2 LIMIT 8;
SAVEPOINT A;
--error 1062
UPDATE t1 SET id = 8 WHERE b BETWEEN 4 and 8 LIMIT 3;
SELECT id FROM t1 WHERE 1 = 1;
SELECT id FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT id FROM t1 WHERE 1 = 1 AND id > -16777216;
DELETE FROM t2 WHERE a BETWEEN 8 and 1 LIMIT 2;
UPDATE t1 SET b = 7 WHERE id = 9 LIMIT 7;
ROLLBACK TO SAVEPOINT A;
ROLLBACK;
UPDATE t2 SET a = 3 WHERE id IN ( 8 , 4 , 5 ) LIMIT 0;
SELECT id FROM t2 WHERE 1 = 1;
SELECT id FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT id FROM t2 WHERE 1 = 1 AND id > -16777216;
SELECT a FROM t2 WHERE a = 3;
SELECT a FROM t2 WHERE a = 3 /* no additional predicate */;
SELECT a FROM t2 WHERE a = 3 AND id > -16777216;
DELETE FROM t1 WHERE b = 2 LIMIT 2;
ROLLBACK;
INSERT INTO t1 ( a, b ) VALUES ( 7 , 4 );
UPDATE t1 SET a = 0 WHERE a > 0 LIMIT 4;
COMMIT;
DELETE FROM t2 WHERE id = 5 LIMIT 2;
DELETE FROM t2 WHERE a = 3 LIMIT 0;
SELECT b FROM t1 WHERE a = 2;
SELECT b FROM t1 WHERE a = 2 /* no additional predicate */;
SELECT b FROM t1 WHERE a = 2 AND id > -16777216;
UPDATE t1 SET b = 8 WHERE id BETWEEN 8 and 4 LIMIT 8;
UPDATE t1 SET b = 2 WHERE id = 1 LIMIT 6;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 7 );
SELECT a FROM t1 WHERE id > 5;
SELECT a FROM t1 WHERE id > 5 /* no additional predicate */;
SELECT a FROM t1 WHERE id > 5 AND id > -16777216;
DELETE FROM t2 WHERE id < 3 LIMIT 3;
UPDATE t2 SET id = 8 WHERE id = 4 LIMIT 5;
UPDATE t1 SET a = 3 WHERE a = 0 LIMIT 4;
SET AUTOCOMMIT=1;
SELECT b FROM t1 WHERE id = 7;
SELECT DATABASE();
SELECT b FROM t1 WHERE id = 7 /* no additional predicate */;
SELECT VERSION();
SELECT b FROM t1 WHERE id = 7 AND id > -16777216;
--error 1305
ROLLBACK TO SAVEPOINT A;
INSERT INTO t2 ( a, b ) VALUES ( 2 , 9 );
SELECT a FROM t1 WHERE id BETWEEN 9 and 5;
SELECT a FROM t1 WHERE id BETWEEN 9 and 5 /* no additional predicate */;
SELECT a FROM t1 WHERE id BETWEEN 9 and 5 AND id > -16777216;
--error 1305
ROLLBACK TO SAVEPOINT A;
DELETE FROM t1 WHERE a BETWEEN 8 and 8 LIMIT 5;
--error 1305
ROLLBACK TO SAVEPOINT A;
COMMIT;
DELETE FROM t1 WHERE id IN ( 9 , 1 , 9 ) LIMIT 8;
INSERT INTO t2 ( a, b ) VALUES ( 5 , 2 );
DELETE FROM t1 WHERE a < 7 LIMIT 0;
DELETE FROM t2 WHERE 1 = 1 LIMIT 2;
START TRANSACTION;
INSERT INTO t2 ( a, b ) VALUES ( 2 , 0 );
UPDATE t2 SET a = 7 WHERE a BETWEEN 9 and 0 LIMIT 7;
SELECT b FROM t2 WHERE 1 = 1;
SELECT b FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT b FROM t2 WHERE 1 = 1 AND id > -16777216;
DELETE FROM t1 WHERE 1 = 1 LIMIT 1;
SELECT a FROM t2 WHERE b = 1;
SELECT a FROM t2 WHERE b = 1 /* no additional predicate */;
SELECT a FROM t2 WHERE b = 1 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 5 , 9 );
INSERT INTO t2 ( a, b ) VALUES ( 9 , 4 );
DELETE FROM t2 WHERE b > 1 LIMIT 8;
UPDATE t2 SET id = 7 WHERE b > 4 LIMIT 0;
SELECT a FROM t2 WHERE a < 0;
SELECT a FROM t2 WHERE a < 0 /* no additional predicate */;
SELECT a FROM t2 WHERE a < 0 AND id > -16777216;
SET GLOBAL TRANSACTION ISOLATION LEVEL REPEATABLE READ;
START TRANSACTION;
SET AUTOCOMMIT=OFF;
START TRANSACTION;
DELETE FROM t1 WHERE 1 = 1 LIMIT 2;
INSERT INTO t1 ( a, b ) VALUES ( 0 , 2 );
SELECT a FROM t2 WHERE b > 9;
UPDATE t1 SET b = 3 WHERE id < 5 LIMIT 6;
SELECT id FROM t2 WHERE id BETWEEN 3 and 4;
SELECT a FROM t2 WHERE b > 9 /* no additional predicate */;
SELECT id FROM t2 WHERE id BETWEEN 3 and 4 /* no additional predicate */;
SELECT id FROM t2 WHERE id BETWEEN 3 and 4 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 8 );
SELECT a FROM t2 WHERE b > 9 AND id > -16777216;
SELECT a FROM t1 WHERE a BETWEEN 0 and 0;
SELECT a FROM t1 WHERE a BETWEEN 0 and 0 /* no additional predicate */;
SELECT a FROM t1 WHERE a BETWEEN 0 and 0 AND id > -16777216;
SELECT b FROM t2 WHERE b = 7;
SELECT b FROM t2 WHERE b = 7 /* no additional predicate */;
SELECT b FROM t2 WHERE b = 7 AND id > -16777216;
DELETE FROM t2 WHERE a BETWEEN 6 and 7 LIMIT 0;
UPDATE t2 SET id = 5 WHERE b = 6 LIMIT 4;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 4 );
UPDATE t1 SET b = 7 WHERE id IN ( 7 , 2 , 0 ) LIMIT 0;
DELETE FROM t1 WHERE a < 1 LIMIT 1;
START TRANSACTION;
UPDATE t2 SET a = 5 WHERE id IN ( 7 , 8 , 9 ) LIMIT 2;
SELECT a FROM t2 WHERE b < 9;
SELECT a FROM t2 WHERE b < 9 /* no additional predicate */;
SELECT a FROM t2 WHERE b < 9 AND id > -16777216;
--error 1062
UPDATE t1 SET id = 0 WHERE 1 = 1 LIMIT 9;
INSERT INTO t1 ( a, b ) VALUES ( 6 , 1 );
INSERT INTO t1 ( a, b ) VALUES ( 4 , 7 );
INSERT INTO t1 ( a, b ) VALUES ( 7 , 4 );
SELECT a FROM t2 WHERE b = 0;
SELECT a FROM t2 WHERE b = 0 /* no additional predicate */;
ROLLBACK;
START TRANSACTION;
SELECT a FROM t2 WHERE b = 0 AND id > -16777216;
--error 1305
ROLLBACK TO SAVEPOINT A;
UPDATE t1 SET id = 2 WHERE id < 1 LIMIT 6;
DELETE FROM t2 WHERE b > 4 LIMIT 3;
SELECT a FROM t2 WHERE b BETWEEN 1 and 2;
SELECT a FROM t2 WHERE b BETWEEN 1 and 2 /* no additional predicate */;
SELECT id FROM t1 WHERE id BETWEEN 0 and 4;
SELECT a FROM t2 WHERE b BETWEEN 1 and 2 AND id > -16777216;
SELECT id FROM t1 WHERE id BETWEEN 0 and 4 /* no additional predicate */;
SELECT id FROM t1 WHERE id BETWEEN 0 and 4 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 3 );
UPDATE t1 SET a = 5 WHERE id < 5 LIMIT 0;
INSERT INTO t2 ( a, b ) VALUES ( 4 , 1 );
INSERT INTO t2 ( a, b ) VALUES ( 8 , 5 );
INSERT INTO t1 ( a, b ) VALUES ( 5 , 0 );
--error 1062
UPDATE t1 SET id = 7 WHERE id > 7 LIMIT 7;
INSERT INTO t2 ( a, b ) VALUES ( 8 , 6 );
INSERT INTO t1 ( a, b ) VALUES ( 5 , 1 );
DELETE FROM t2 WHERE a < 3 LIMIT 6;
SAVEPOINT A;
START TRANSACTION;
DELETE FROM t1 WHERE a BETWEEN 7 and 4 LIMIT 4;
DELETE FROM t1 WHERE 1 = 1 LIMIT 3;
--error 1062
UPDATE t1 SET id = 9 WHERE 1 = 1 LIMIT 6;
UPDATE t2 SET b = 4 WHERE b IN ( 2 , 5 , 0 ) LIMIT 2;
DELETE FROM t2 WHERE b BETWEEN 4 and 9 LIMIT 7;
INSERT INTO t1 ( a, b ) VALUES ( 6 , 0 );
INSERT INTO t2 ( a, b ) VALUES ( 3 , 6 );
INSERT INTO t1 ( a, b ) VALUES ( 0 , 9 );
SELECT a FROM t2 WHERE a < 6;
ROLLBACK;
ROLLBACK;
SELECT a FROM t2 WHERE a < 6 /* no additional predicate */;
START TRANSACTION;
SELECT a FROM t2 WHERE a < 6 AND id > -16777216;
--error 1305
ROLLBACK TO SAVEPOINT A;
SELECT b FROM t2 WHERE a > 0;
SELECT b FROM t2 WHERE a > 0 /* no additional predicate */;
SELECT b FROM t2 WHERE a > 0 AND id > -16777216;
DELETE FROM t2 WHERE b BETWEEN 1 and 7 LIMIT 2;
COMMIT;
UPDATE t2 SET b = 1 WHERE a = 0 LIMIT 8;
DELETE FROM t2 WHERE id BETWEEN 9 and 4 LIMIT 8;
SELECT a FROM t2 WHERE a > 5;
SELECT a FROM t2 WHERE a > 5 /* no additional predicate */;
COMMIT;
SET AUTOCOMMIT=1;
SELECT id FROM t2 WHERE b > 8;
SELECT id FROM t2 WHERE b > 8 /* no additional predicate */;
SELECT a FROM t2 WHERE a > 5 AND id > -16777216;
SELECT id FROM t2 WHERE b > 8 AND id > -16777216;
SAVEPOINT A;
UPDATE t1 SET b = 6 WHERE b > 4 LIMIT 1;
UPDATE t2 SET b = 4 WHERE 1 = 1 LIMIT 8;
DELETE FROM t2 WHERE 1 = 1 LIMIT 0;
DELETE FROM t1 WHERE b = 7 LIMIT 2;
--error 1305
ROLLBACK TO SAVEPOINT A;
INSERT INTO t1 ( a, b ) VALUES ( 4 , 7 );
DELETE FROM t2 WHERE id = 8 LIMIT 8;
DELETE FROM t1 WHERE 1 = 1 LIMIT 7;
INSERT INTO t1 ( a, b ) VALUES ( 2 , 0 );
SELECT b FROM t1 WHERE b < 5;
SELECT b FROM t1 WHERE b < 5 /* no additional predicate */;
SELECT b FROM t1 WHERE b < 5 AND id > -16777216;
DELETE FROM t1 WHERE 1 = 1 LIMIT 0;
UPDATE t1 SET id = 3 WHERE id < 4 LIMIT 7;
DELETE FROM t2 WHERE 1 = 1 LIMIT 0;
SELECT id FROM t2 WHERE id BETWEEN 0 and 0;
SELECT id FROM t2 WHERE id BETWEEN 0 and 0 /* no additional predicate */;
SELECT id FROM t2 WHERE id BETWEEN 0 and 0 AND id > -16777216;
DELETE FROM t1 WHERE b < 3 LIMIT 6;
START TRANSACTION;
UPDATE t1 SET b = 2 WHERE 1 = 1 LIMIT 1;
SELECT b FROM t2 WHERE a < 2;
SELECT b FROM t2 WHERE a < 2 /* no additional predicate */;
SELECT b FROM t2 WHERE a < 2 AND id > -16777216;
UPDATE t1 SET b = 8 WHERE id = 8 LIMIT 5;
ROLLBACK;
--error 1062
UPDATE t1 SET id = 5 WHERE 1 = 1 LIMIT 8;
UPDATE t1 SET id = 7 WHERE id = 4 LIMIT 0;
SELECT a FROM t2 WHERE a > 1;
SAVEPOINT A;
SELECT a FROM t2 WHERE a > 1 /* no additional predicate */;
INSERT INTO t2 ( a, b ) VALUES ( 9 , 8 );
SELECT a FROM t2 WHERE a > 1 AND id > -16777216;
UPDATE t2 SET b = 0 WHERE a > 1 LIMIT 3;
--error 1305
ROLLBACK TO SAVEPOINT A;
DELETE FROM t2 WHERE a = 9 LIMIT 1;
SAVEPOINT A;
UPDATE t1 SET a = 8 WHERE b BETWEEN 1 and 9 LIMIT 2;
UPDATE t1 SET b = 8 WHERE a = 2 LIMIT 6;
COMMIT;
COMMIT;
INSERT INTO t2 ( a, b ) VALUES ( 8 , 9 );
DELETE FROM t1 WHERE b > 3 LIMIT 6;
UPDATE t2 SET b = 0 WHERE a < 5 LIMIT 0;
START TRANSACTION;
SELECT VERSION();
SELECT collation_name,character_set_name FROM data_dictionary.collations;
UPDATE t1 SET b = 2 WHERE a < 1 LIMIT 0;
--error 1062
UPDATE t2 SET id = 8 WHERE 1 = 1 LIMIT 9;
UPDATE t2 SET b = 7 WHERE a IN ( 8 , 6 , 2 ) LIMIT 6;
COMMIT;
COMMIT;
DELETE FROM t2 WHERE a IN ( 5 , 8 , 1 ) LIMIT 1;
DELETE FROM t1 WHERE 1 = 1 LIMIT 5;
INSERT INTO t1 ( a, b ) VALUES ( 0 , 4 );
SET GLOBAL TRANSACTION ISOLATION LEVEL REPEATABLE READ;
SAVEPOINT A;
SET AUTOCOMMIT=OFF;
DELETE FROM t2 WHERE a < 7 LIMIT 0;
UPDATE t2 SET id = 4 WHERE 1 = 1 LIMIT 0;
DELETE FROM t1 WHERE a IN ( 4 , 5 , 2 ) LIMIT 9;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 0 );
DELETE FROM t1 WHERE id = 9 LIMIT 2;
UPDATE t2 SET a = 2 WHERE b BETWEEN 9 and 2 LIMIT 4;
SELECT a FROM t2 WHERE a BETWEEN 6 and 0;
INSERT INTO t2 ( a, b ) VALUES ( 0 , 0 );
SELECT a FROM t2 WHERE a BETWEEN 6 and 0 /* no additional predicate */;
INSERT INTO t1 ( a, b ) VALUES ( 6 , 8 );
SELECT a FROM t2 WHERE a BETWEEN 6 and 0 AND id > -16777216;
SAVEPOINT A;
SELECT b FROM t1 WHERE a < 5;
SELECT b FROM t1 WHERE a < 5 /* no additional predicate */;
SELECT b FROM t1 WHERE a < 5 AND id > -16777216;
DELETE FROM t2 WHERE id = 0 LIMIT 1;
SELECT a FROM t1 WHERE id < 0;
SELECT a FROM t1 WHERE id < 0 /* no additional predicate */;
SELECT a FROM t1 WHERE id < 0 AND id > -16777216;
UPDATE t1 SET a = 5 WHERE a < 1 LIMIT 2;
--error 1062
UPDATE t1 SET id = 0 WHERE 1 = 1 LIMIT 3;
UPDATE t2 SET b = 8 WHERE b = 0 LIMIT 1;
SELECT a FROM t1 WHERE id = 4;
SELECT a FROM t1 WHERE id = 4 /* no additional predicate */;
SELECT a FROM t1 WHERE id = 4 AND id > -16777216;
UPDATE t2 SET a = 9 WHERE b > 4 LIMIT 9;
UPDATE t2 SET id = 9 WHERE b BETWEEN 7 and 1 LIMIT 1;
DELETE FROM t2 WHERE b BETWEEN 6 and 8 LIMIT 6;
COMMIT;
ROLLBACK;
UPDATE t2 SET a = 5 WHERE b < 2 LIMIT 9;
SELECT b FROM t1 WHERE b IN ( 8 , 3 , 5 );
SELECT b FROM t1 WHERE b IN ( 8 , 3 , 5 ) /* no additional predicate */;
INSERT INTO t2 ( a, b ) VALUES ( 4 , 4 );
SELECT b FROM t1 WHERE b IN ( 8 , 3 , 5 ) AND id > -16777216;
SELECT b FROM t2 WHERE id IN ( 0 , 1 , 1 );
SELECT a FROM t1 WHERE 1 = 1;
SELECT b FROM t2 WHERE id IN ( 0 , 1 , 1 ) /* no additional predicate */;
SELECT a FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT b FROM t2 WHERE id IN ( 0 , 1 , 1 ) AND id > -16777216;
SELECT a FROM t1 WHERE 1 = 1 AND id > -16777216;
UPDATE t2 SET b = 2 WHERE id = 2 LIMIT 9;
SELECT b FROM t2 WHERE b IN ( 1 , 2 , 3 );
UPDATE t2 SET a = 0 WHERE id = 1 LIMIT 3;
SELECT b FROM t2 WHERE b IN ( 1 , 2 , 3 ) /* no additional predicate */;
SELECT id FROM t1 WHERE b < 9;
SELECT b FROM t2 WHERE b IN ( 1 , 2 , 3 ) AND id > -16777216;
SELECT id FROM t1 WHERE b < 9 /* no additional predicate */;
COMMIT;
--error 1305
ROLLBACK TO SAVEPOINT A;
SELECT id FROM t1 WHERE b < 9 AND id > -16777216;
SELECT a FROM t2 WHERE id BETWEEN 1 and 4;
INSERT INTO t2 ( a, b ) VALUES ( 3 , 0 );
START TRANSACTION;
SELECT a FROM t2 WHERE id BETWEEN 1 and 4 /* no additional predicate */;
SELECT a FROM t2 WHERE id BETWEEN 1 and 4 AND id > -16777216;
UPDATE t2 SET id = 7 WHERE b = 8 LIMIT 8;
SELECT b FROM t2 WHERE a BETWEEN 6 and 8;
--error 1062
UPDATE t1 SET id = 8 WHERE 1 = 1 LIMIT 8;
SELECT b FROM t2 WHERE a BETWEEN 6 and 8 /* no additional predicate */;
--error 1305
ROLLBACK TO SAVEPOINT A;
SELECT b FROM t2 WHERE a BETWEEN 6 and 8 AND id > -16777216;
UPDATE t1 SET a = 0 WHERE id > 7 LIMIT 1;
UPDATE t1 SET b = 1 WHERE b < 6 LIMIT 6;
INSERT INTO t1 ( a, b ) VALUES ( 6 , 2 );
INSERT INTO t2 ( a, b ) VALUES ( 4 , 4 );
UPDATE t1 SET id = 9 WHERE b > 8 LIMIT 3;
DELETE FROM t2 WHERE 1 = 1 LIMIT 4;
UPDATE t2 SET b = 1 WHERE b > 2 LIMIT 5;
SELECT id FROM t1 WHERE 1 = 1;
--error 1305
ROLLBACK TO SAVEPOINT A;
SELECT id FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT id FROM t1 WHERE 1 = 1 AND id > -16777216;
UPDATE t2 SET b = 9 WHERE a IN ( 9 , 1 , 9 ) LIMIT 6;
UPDATE t2 SET id = 1 WHERE a > 6 LIMIT 8;
INSERT INTO t1 ( a, b ) VALUES ( 5 , 1 );
DELETE FROM t1 WHERE id IN ( 0 , 7 , 4 ) LIMIT 0;
DELETE FROM t1 WHERE id > 8 LIMIT 4;
SAVEPOINT A;
SELECT id FROM t2 WHERE 1 = 1;
SELECT id FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT id FROM t2 WHERE 1 = 1 AND id > -16777216;
UPDATE t2 SET id = 5 WHERE id > 7 LIMIT 6;
DELETE FROM t1 WHERE id IN ( 1 , 5 , 3 ) LIMIT 8;
INSERT INTO t2 ( a, b ) VALUES ( 9 , 0 );
DELETE FROM t2 WHERE 1 = 1 LIMIT 2;
INSERT INTO t1 ( a, b ) VALUES ( 7 , 6 );
UPDATE t2 SET a = 0 WHERE id < 9 LIMIT 0;
UPDATE t1 SET a = 8 WHERE 1 = 1 LIMIT 5;
ROLLBACK TO SAVEPOINT A;
ROLLBACK;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 3 );
SELECT id FROM t2 WHERE a > 2;
SELECT id FROM t2 WHERE a > 2 /* no additional predicate */;
SELECT id FROM t2 WHERE a > 2 AND id > -16777216;
ROLLBACK;
SELECT b FROM t2 WHERE id < 2;
SELECT b FROM t2 WHERE id < 2 /* no additional predicate */;
SELECT b FROM t2 WHERE id < 2 AND id > -16777216;
SELECT b FROM t1 WHERE b = 0;
SELECT a FROM t2 WHERE a BETWEEN 5 and 8;
SELECT b FROM t1 WHERE b = 0 /* no additional predicate */;
SELECT a FROM t2 WHERE a BETWEEN 5 and 8 /* no additional predicate */;
SELECT b FROM t1 WHERE b = 0 AND id > -16777216;
SELECT a FROM t2 WHERE a BETWEEN 5 and 8 AND id > -16777216;
UPDATE t1 SET b = 0 WHERE id < 0 LIMIT 6;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 9 );
SET AUTOCOMMIT=1;
UPDATE t2 SET a = 8 WHERE 1 = 1 LIMIT 1;
SELECT b FROM t1 WHERE id BETWEEN 7 and 0;
UPDATE t2 SET a = 0 WHERE id IN ( 9 , 3 , 6 ) LIMIT 1;
SELECT DATABASE();
SELECT b FROM t1 WHERE id BETWEEN 7 and 0 /* no additional predicate */;
SAVEPOINT A;
SELECT b FROM t1 WHERE id BETWEEN 7 and 0 AND id > -16777216;
UPDATE t2 SET b = 8 WHERE a IN ( 5 , 5 , 7 ) LIMIT 0;
UPDATE t1 SET b = 5 WHERE id < 3 LIMIT 8;
SELECT a FROM t1 WHERE a IN ( 8 , 2 , 4 );
SELECT a FROM t1 WHERE a IN ( 8 , 2 , 4 ) /* no additional predicate */;
SELECT a FROM t1 WHERE a IN ( 8 , 2 , 4 ) AND id > -16777216;
DELETE FROM t2 WHERE id IN ( 7 , 6 , 4 ) LIMIT 5;
SELECT a FROM t1 WHERE 1 = 1;
SELECT a FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT a FROM t1 WHERE 1 = 1 AND id > -16777216;
--error 1305
ROLLBACK TO SAVEPOINT A;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 6 );
SELECT a FROM t2 WHERE id BETWEEN 5 and 1;
SELECT a FROM t2 WHERE id BETWEEN 5 and 1 /* no additional predicate */;
SELECT a FROM t2 WHERE id BETWEEN 5 and 1 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 9 );
COMMIT;
START TRANSACTION;
COMMIT;
UPDATE t2 SET b = 8 WHERE b = 9 LIMIT 1;
DELETE FROM t1 WHERE 1 = 1 LIMIT 0;
UPDATE t2 SET a = 0 WHERE b = 0 LIMIT 4;
DELETE FROM t1 WHERE a < 1 LIMIT 4;
INSERT INTO t2 ( a, b ) VALUES ( 0 , 1 );
SELECT a FROM t1 WHERE a BETWEEN 2 and 1;
SELECT a FROM t1 WHERE a BETWEEN 2 and 1 /* no additional predicate */;
SELECT a FROM t1 WHERE a BETWEEN 2 and 1 AND id > -16777216;
UPDATE t2 SET b = 1 WHERE b = 3 LIMIT 0;
SET GLOBAL TRANSACTION ISOLATION LEVEL REPEATABLE READ;
SET AUTOCOMMIT=OFF;
INSERT INTO t2 ( a, b ) VALUES ( 1 , 0 );
SELECT id FROM t2 WHERE a = 3;
SELECT b FROM t1 WHERE a = 7;
SELECT id FROM t2 WHERE a = 3 /* no additional predicate */;
SELECT b FROM t1 WHERE a = 7 /* no additional predicate */;
SELECT id FROM t2 WHERE a = 3 AND id > -16777216;
SELECT b FROM t1 WHERE a = 7 AND id > -16777216;
SAVEPOINT A;
SAVEPOINT A;
INSERT INTO t1 ( a, b ) VALUES ( 4 , 0 );
UPDATE t1 SET b = 8 WHERE a BETWEEN 0 and 0 LIMIT 0;
DELETE FROM t1 WHERE 1 = 1 LIMIT 7;
ROLLBACK;
SAVEPOINT A;
SELECT b FROM t1 WHERE a = 3;
SELECT b FROM t1 WHERE a = 3 /* no additional predicate */;
UPDATE t2 SET b = 1 WHERE 1 = 1 LIMIT 1;
SELECT b FROM t1 WHERE a = 3 AND id > -16777216;
DELETE FROM t1 WHERE a BETWEEN 0 and 2 LIMIT 8;
DELETE FROM t2 WHERE b IN ( 3 , 2 , 0 ) LIMIT 9;
SELECT b FROM t1 WHERE b = 1;
INSERT INTO t1 ( a, b ) VALUES ( 0 , 1 );
SELECT id FROM t2 WHERE id IN ( 9 , 5 , 7 );
SELECT b FROM t1 WHERE b = 1 /* no additional predicate */;
INSERT INTO t2 ( a, b ) VALUES ( 2 , 7 );
SELECT id FROM t2 WHERE id IN ( 9 , 5 , 7 ) /* no additional predicate */;
SELECT b FROM t1 WHERE b = 1 AND id > -16777216;
UPDATE t1 SET id = 9 WHERE b BETWEEN 9 and 0 LIMIT 5;
SELECT id FROM t2 WHERE id IN ( 9 , 5 , 7 ) AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 3 , 0 );
INSERT INTO t1 ( a, b ) VALUES ( 1 , 9 );
SELECT id FROM t1 WHERE b BETWEEN 2 and 3;
ROLLBACK TO SAVEPOINT A;
SELECT id FROM t1 WHERE b BETWEEN 2 and 3 /* no additional predicate */;
SELECT id FROM t1 WHERE b BETWEEN 2 and 3 AND id > -16777216;
ROLLBACK TO SAVEPOINT A;
DELETE FROM t2 WHERE 1 = 1 LIMIT 3;
SELECT b FROM t1 WHERE id BETWEEN 0 and 0;
SELECT b FROM t1 WHERE id BETWEEN 0 and 0 /* no additional predicate */;
SELECT b FROM t1 WHERE id BETWEEN 0 and 0 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 5 , 8 );
SAVEPOINT A;
SELECT id FROM t1 WHERE 1 = 1;
SELECT id FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT id FROM t1 WHERE 1 = 1 AND id > -16777216;
DELETE FROM t1 WHERE b IN ( 8 , 0 , 2 ) LIMIT 1;
DELETE FROM t2 WHERE id < 2 LIMIT 2;
UPDATE t1 SET id = 3 WHERE a > 5 LIMIT 4;
DELETE FROM t2 WHERE id < 5 LIMIT 4;
UPDATE t1 SET b = 7 WHERE a < 9 LIMIT 0;
UPDATE t1 SET a = 9 WHERE b > 3 LIMIT 1;
--error 1062
UPDATE t2 SET id = 2 WHERE b > 0 LIMIT 6;
START TRANSACTION;
START TRANSACTION;
UPDATE t1 SET a = 2 WHERE b IN ( 5 , 5 , 0 ) LIMIT 7;
SAVEPOINT A;
SELECT id FROM t1 WHERE a < 9;
SELECT id FROM t1 WHERE a < 9 /* no additional predicate */;
SELECT id FROM t2 WHERE a > 9;
SELECT id FROM t1 WHERE a < 9 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 4 , 3 );
SELECT id FROM t2 WHERE a > 9 /* no additional predicate */;
SAVEPOINT A;
SELECT id FROM t1 WHERE id < 9;
SELECT id FROM t1 WHERE id < 9 /* no additional predicate */;
SELECT id FROM t2 WHERE a > 9 AND id > -16777216;
SELECT id FROM t1 WHERE id < 9 AND id > -16777216;
ROLLBACK;
ROLLBACK;
ROLLBACK;
SELECT id FROM t2 WHERE b BETWEEN 9 and 1;
SELECT id FROM t2 WHERE b BETWEEN 9 and 1 /* no additional predicate */;
SELECT id FROM t2 WHERE b BETWEEN 9 and 1 AND id > -16777216;
SAVEPOINT A;
DELETE FROM t1 WHERE a > 2 LIMIT 3;
DELETE FROM t2 WHERE a < 0 LIMIT 7;
UPDATE t1 SET b = 5 WHERE a IN ( 9 , 4 , 7 ) LIMIT 7;
SELECT b FROM t1 WHERE id < 6;
INSERT INTO t2 ( a, b ) VALUES ( 1 , 0 );
SELECT b FROM t1 WHERE id < 6 /* no additional predicate */;
SELECT b FROM t1 WHERE id < 6 AND id > -16777216;
SELECT a FROM t1 WHERE a BETWEEN 6 and 8;
SET AUTOCOMMIT=1;
SELECT a FROM t1 WHERE a BETWEEN 6 and 8 /* no additional predicate */;
SELECT DATABASE();
INSERT INTO t1 ( a, b ) VALUES ( 7 , 3 );
SELECT a FROM t1 WHERE a BETWEEN 6 and 8 AND id > -16777216;
SELECT id FROM t2 WHERE b = 6;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 4 );
SELECT id FROM t2 WHERE b = 6 /* no additional predicate */;
ROLLBACK TO SAVEPOINT A;
SELECT id FROM t2 WHERE b = 6 AND id > -16777216;
UPDATE t1 SET b = 4 WHERE b < 9 LIMIT 0;
DELETE FROM t2 WHERE a < 1 LIMIT 1;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 6 );
SAVEPOINT A;
DELETE FROM t1 WHERE id IN ( 6 , 8 , 8 ) LIMIT 6;
UPDATE t1 SET a = 1 WHERE a = 9 LIMIT 1;
UPDATE t2 SET b = 7 WHERE id > 6 LIMIT 0;
DELETE FROM t2 WHERE id < 1 LIMIT 4;
DELETE FROM t1 WHERE a > 7 LIMIT 7;
ROLLBACK;
DELETE FROM t2 WHERE b IN ( 8 , 4 , 5 ) LIMIT 5;
UPDATE t2 SET a = 7 WHERE b > 4 LIMIT 0;
UPDATE t1 SET b = 6 WHERE b > 4 LIMIT 8;
SAVEPOINT A;
DELETE FROM t1 WHERE a > 9 LIMIT 3;
INSERT INTO t2 ( a, b ) VALUES ( 3 , 5 );
COMMIT;
SAVEPOINT A;
ROLLBACK TO SAVEPOINT A;
SELECT b FROM t2 WHERE b BETWEEN 0 and 6;
SELECT b FROM t2 WHERE b BETWEEN 0 and 6 /* no additional predicate */;
SELECT b FROM t2 WHERE b BETWEEN 0 and 6 AND id > -16777216;
DELETE FROM t1 WHERE b > 4 LIMIT 9;
UPDATE t1 SET b = 1 WHERE id > 2 LIMIT 2;
SELECT b FROM t2 WHERE 1 = 1;
SELECT b FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT b FROM t2 WHERE 1 = 1 AND id > -16777216;
DELETE FROM t1 WHERE a = 7 LIMIT 4;
DELETE FROM t1 WHERE id > 6 LIMIT 3;
ROLLBACK;
DELETE FROM t1 WHERE a > 7 LIMIT 2;
INSERT INTO t2 ( a, b ) VALUES ( 8 , 3 );
DELETE FROM t1 WHERE a BETWEEN 0 and 6 LIMIT 0;
SELECT b FROM t2 WHERE id = 6;
DELETE FROM t1 WHERE b IN ( 9 , 1 , 0 ) LIMIT 2;
SELECT b FROM t2 WHERE id = 6 /* no additional predicate */;
INSERT INTO t1 ( a, b ) VALUES ( 7 , 5 );
SELECT b FROM t2 WHERE id = 6 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 2 , 7 );
UPDATE t2 SET b = 6 WHERE b = 0 LIMIT 2;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 5 );
INSERT INTO t2 ( a, b ) VALUES ( 1 , 5 );
SELECT a FROM t2 WHERE b IN ( 8 , 1 , 1 );
SELECT a FROM t2 WHERE b IN ( 8 , 1 , 1 ) /* no additional predicate */;
SELECT a FROM t2 WHERE b IN ( 8 , 1 , 1 ) AND id > -16777216;
SELECT a FROM t1 WHERE b < 7;
SELECT a FROM t1 WHERE b < 7 /* no additional predicate */;
SELECT a FROM t1 WHERE b < 7 AND id > -16777216;
UPDATE t2 SET b = 5 WHERE b IN ( 8 , 0 , 6 ) LIMIT 3;
START TRANSACTION;
--error 1062
UPDATE t2 SET id = 1 WHERE 1 = 1 LIMIT 2;
UPDATE t1 SET a = 4 WHERE a IN ( 3 , 9 , 7 ) LIMIT 6;
--error 1062
UPDATE t2 SET id = 9 WHERE 1 = 1 LIMIT 8;
SELECT id FROM t2 WHERE id > 5;
SELECT a FROM t2 WHERE b = 7;
SELECT id FROM t2 WHERE id > 5 /* no additional predicate */;
SELECT a FROM t2 WHERE b = 7 /* no additional predicate */;
SELECT a FROM t2 WHERE b = 7 AND id > -16777216;
SELECT id FROM t2 WHERE id > 5 AND id > -16777216;
SELECT VERSION();
SELECT collation_name,character_set_name FROM data_dictionary.collations;
ROLLBACK;
SELECT id FROM t2 WHERE b BETWEEN 8 and 6;
SELECT id FROM t2 WHERE b BETWEEN 8 and 6 /* no additional predicate */;
SELECT id FROM t2 WHERE b BETWEEN 8 and 6 AND id > -16777216;
SET GLOBAL TRANSACTION ISOLATION LEVEL REPEATABLE READ;
DELETE FROM t2 WHERE id = 7 LIMIT 9;
SET AUTOCOMMIT=OFF;
DELETE FROM t1 WHERE id IN ( 5 , 6 , 6 ) LIMIT 9;
DELETE FROM t2 WHERE id BETWEEN 5 and 5 LIMIT 0;
UPDATE t1 SET a = 5 WHERE b = 7 LIMIT 1;
START TRANSACTION;
UPDATE t1 SET a = 7 WHERE a > 7 LIMIT 8;
DELETE FROM t1 WHERE a = 4 LIMIT 2;
SELECT id FROM t2 WHERE id > 6;
SELECT b FROM t2 WHERE b = 8;
SELECT b FROM t2 WHERE b = 8 /* no additional predicate */;
SELECT b FROM t2 WHERE b = 8 AND id > -16777216;
SELECT id FROM t2 WHERE id > 6 /* no additional predicate */;
DELETE FROM t1 WHERE 1 = 1 LIMIT 6;
SELECT id FROM t2 WHERE id > 6 AND id > -16777216;
START TRANSACTION;
ROLLBACK;
INSERT INTO t1 ( a, b ) VALUES ( 0 , 7 );
DELETE FROM t1 WHERE b IN ( 7 , 3 , 6 ) LIMIT 6;
DELETE FROM t2 WHERE 1 = 1 LIMIT 2;
SELECT id FROM t1 WHERE id IN ( 2 , 2 , 2 );
SELECT id FROM t1 WHERE id IN ( 2 , 2 , 2 ) /* no additional predicate */;
UPDATE t2 SET b = 2 WHERE a = 7 LIMIT 3;
SELECT id FROM t1 WHERE id IN ( 2 , 2 , 2 ) AND id > -16777216;
UPDATE t2 SET b = 3 WHERE a < 3 LIMIT 1;
UPDATE t1 SET id = 6 WHERE a < 1 LIMIT 6;
UPDATE t2 SET b = 3 WHERE 1 = 1 LIMIT 5;
DELETE FROM t2 WHERE b = 3 LIMIT 9;
UPDATE t2 SET id = 2 WHERE id BETWEEN 0 and 0 LIMIT 1;
DELETE FROM t1 WHERE b BETWEEN 5 and 9 LIMIT 5;
UPDATE t2 SET id = 8 WHERE id = 9 LIMIT 2;
START TRANSACTION;
ROLLBACK;
UPDATE t1 SET b = 0 WHERE a BETWEEN 8 and 8 LIMIT 8;
ROLLBACK TO SAVEPOINT A;
UPDATE t1 SET b = 0 WHERE 1 = 1 LIMIT 6;
SELECT b FROM t1 WHERE id = 5;
INSERT INTO t1 ( a, b ) VALUES ( 0 , 5 );
SELECT b FROM t1 WHERE id = 5 /* no additional predicate */;
SELECT b FROM t1 WHERE id > 7;
SELECT b FROM t1 WHERE id = 5 AND id > -16777216;
SELECT b FROM t1 WHERE id > 7 /* no additional predicate */;
DELETE FROM t1 WHERE 1 = 1 LIMIT 4;
SELECT b FROM t1 WHERE id > 7 AND id > -16777216;
UPDATE t1 SET a = 8 WHERE a BETWEEN 3 and 5 LIMIT 9;
SELECT b FROM t1 WHERE id > 8;
SELECT b FROM t1 WHERE id > 8 /* no additional predicate */;
UPDATE t2 SET id = 9 WHERE b = 7 LIMIT 2;
SELECT b FROM t1 WHERE id > 8 AND id > -16777216;
DELETE FROM t2 WHERE b > 9 LIMIT 4;
SELECT a FROM t1 WHERE a > 0;
SELECT a FROM t1 WHERE a > 0 /* no additional predicate */;
SELECT a FROM t1 WHERE a > 0 AND id > -16777216;
DELETE FROM t2 WHERE a < 5 LIMIT 6;
INSERT INTO t2 ( a, b ) VALUES ( 2 , 7 );
SELECT id FROM t2 WHERE 1 = 1;
SELECT id FROM t2 WHERE 1 = 1 /* no additional predicate */;
DELETE FROM t2 WHERE id BETWEEN 1 and 9 LIMIT 8;
DELETE FROM t2 WHERE id = 9 LIMIT 5;
UPDATE t1 SET id = 9 WHERE b > 5 LIMIT 2;
SELECT id FROM t2 WHERE 1 = 1 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 0 , 4 );
INSERT INTO t2 ( a, b ) VALUES ( 9 , 9 );
INSERT INTO t2 ( a, b ) VALUES ( 1 , 2 );
UPDATE t2 SET a = 1 WHERE 1 = 1 LIMIT 4;
SAVEPOINT A;
DELETE FROM t1 WHERE a > 0 LIMIT 3;
SELECT b FROM t2 WHERE id IN ( 0 , 0 , 3 );
SELECT b FROM t2 WHERE id IN ( 0 , 0 , 3 ) /* no additional predicate */;
SELECT a FROM t2 WHERE id BETWEEN 3 and 0;
SELECT a FROM t2 WHERE id BETWEEN 3 and 0 /* no additional predicate */;
SELECT b FROM t2 WHERE id IN ( 0 , 0 , 3 ) AND id > -16777216;
SELECT a FROM t2 WHERE id BETWEEN 3 and 0 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 9 );
DELETE FROM t1 WHERE 1 = 1 LIMIT 1;
UPDATE t1 SET b = 1 WHERE 1 = 1 LIMIT 2;
INSERT INTO t2 ( a, b ) VALUES ( 1 , 6 );
UPDATE t1 SET b = 7 WHERE b < 3 LIMIT 6;
UPDATE t1 SET a = 3 WHERE id = 1 LIMIT 0;
UPDATE t2 SET b = 1 WHERE id = 3 LIMIT 9;
DELETE FROM t1 WHERE a > 3 LIMIT 6;
SELECT id FROM t2 WHERE a BETWEEN 2 and 2;
UPDATE t1 SET a = 2 WHERE a BETWEEN 8 and 2 LIMIT 1;
SELECT id FROM t2 WHERE a BETWEEN 2 and 2 /* no additional predicate */;
SELECT id FROM t2 WHERE a BETWEEN 2 and 2 AND id > -16777216;
UPDATE t1 SET a = 2 WHERE b > 3 LIMIT 9;
SAVEPOINT A;
INSERT INTO t2 ( a, b ) VALUES ( 3 , 0 );
INSERT INTO t1 ( a, b ) VALUES ( 3 , 1 );
SELECT id FROM t2 WHERE a BETWEEN 3 and 9;
SELECT id FROM t2 WHERE a BETWEEN 3 and 9 /* no additional predicate */;
SELECT id FROM t2 WHERE a BETWEEN 3 and 9 AND id > -16777216;
UPDATE t1 SET b = 9 WHERE id > 8 LIMIT 5;
--error 1062
UPDATE t2 SET id = 1 WHERE b < 8 LIMIT 2;
DELETE FROM t1 WHERE id < 5 LIMIT 8;
DELETE FROM t1 WHERE a IN ( 6 , 6 , 9 ) LIMIT 1;
--error 1062
UPDATE t2 SET id = 7 WHERE 1 = 1 LIMIT 6;
SELECT id FROM t1 WHERE id IN ( 7 , 0 , 0 );
ROLLBACK;
SELECT id FROM t1 WHERE id IN ( 7 , 0 , 0 ) /* no additional predicate */;
COMMIT;
SELECT id FROM t1 WHERE id IN ( 7 , 0 , 0 ) AND id > -16777216;
SELECT a FROM t1 WHERE a IN ( 8 , 3 , 6 );
UPDATE t2 SET id = 5 WHERE id = 9 LIMIT 4;
SELECT a FROM t1 WHERE a IN ( 8 , 3 , 6 ) /* no additional predicate */;
UPDATE t2 SET a = 8 WHERE id = 4 LIMIT 0;
SELECT a FROM t1 WHERE a IN ( 8 , 3 , 6 ) AND id > -16777216;
DELETE FROM t2 WHERE a BETWEEN 7 and 3 LIMIT 7;
COMMIT;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 2 );
SAVEPOINT A;
SELECT a FROM t1 WHERE id = 9;
SELECT a FROM t1 WHERE id = 9 /* no additional predicate */;
SELECT a FROM t1 WHERE b IN ( 9 , 0 , 1 );
SELECT a FROM t1 WHERE id = 9 AND id > -16777216;
SELECT a FROM t1 WHERE b IN ( 9 , 0 , 1 ) /* no additional predicate */;
INSERT INTO t2 ( a, b ) VALUES ( 9 , 1 );
SELECT a FROM t1 WHERE b IN ( 9 , 0 , 1 ) AND id > -16777216;
DELETE FROM t1 WHERE id IN ( 2 , 0 , 9 ) LIMIT 7;
COMMIT;
UPDATE t1 SET b = 4 WHERE a = 6 LIMIT 5;
SAVEPOINT A;
DELETE FROM t1 WHERE a BETWEEN 3 and 3 LIMIT 3;
INSERT INTO t1 ( a, b ) VALUES ( 7 , 4 );
SELECT a FROM t2 WHERE id BETWEEN 9 and 5;
--error 1062
UPDATE t1 SET id = 2 WHERE a > 0 LIMIT 6;
SELECT a FROM t2 WHERE id BETWEEN 9 and 5 /* no additional predicate */;
INSERT INTO t2 ( a, b ) VALUES ( 0 , 3 );
SELECT id FROM t2 WHERE b < 9;
SELECT a FROM t2 WHERE id BETWEEN 9 and 5 AND id > -16777216;
SELECT id FROM t2 WHERE b < 9 /* no additional predicate */;
SELECT b FROM t2 WHERE a > 3;
SELECT id FROM t2 WHERE b < 9 AND id > -16777216;
UPDATE t2 SET id = 6 WHERE b = 8 LIMIT 6;
UPDATE t1 SET a = 7 WHERE a = 4 LIMIT 0;
SELECT b FROM t2 WHERE a > 3 /* no additional predicate */;
UPDATE t1 SET id = 4 WHERE id = 0 LIMIT 2;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 2 );
DELETE FROM t1 WHERE id > 0 LIMIT 8;
SELECT b FROM t2 WHERE a > 3 AND id > -16777216;
START TRANSACTION;
UPDATE t2 SET a = 6 WHERE id = 9 LIMIT 9;
SELECT b FROM t1 WHERE a BETWEEN 5 and 3;
SELECT b FROM t1 WHERE a BETWEEN 5 and 3 /* no additional predicate */;
DELETE FROM t2 WHERE b IN ( 4 , 0 , 3 ) LIMIT 2;
SELECT b FROM t1 WHERE a BETWEEN 5 and 3 AND id > -16777216;
ROLLBACK TO SAVEPOINT A;
SELECT a FROM t2 WHERE b < 5;
SELECT a FROM t2 WHERE b < 5 /* no additional predicate */;
UPDATE t2 SET a = 9 WHERE 1 = 1 LIMIT 1;
COMMIT;
SELECT a FROM t2 WHERE b < 5 AND id > -16777216;
UPDATE t1 SET id = 1 WHERE b < 2 LIMIT 6;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 0 );
UPDATE t2 SET a = 5 WHERE b BETWEEN 8 and 0 LIMIT 9;
DELETE FROM t2 WHERE b IN ( 9 , 2 , 3 ) LIMIT 7;
UPDATE t1 SET b = 5 WHERE id IN ( 0 , 8 , 9 ) LIMIT 7;
SAVEPOINT A;
DELETE FROM t2 WHERE id BETWEEN 5 and 4 LIMIT 1;
DELETE FROM t2 WHERE b BETWEEN 3 and 3 LIMIT 4;
SELECT id FROM t2 WHERE b < 6;
SELECT id FROM t2 WHERE b < 6 /* no additional predicate */;
UPDATE t1 SET b = 8 WHERE id BETWEEN 7 and 6 LIMIT 1;
DELETE FROM t1 WHERE id = 8 LIMIT 5;
SELECT id FROM t2 WHERE b < 6 AND id > -16777216;
ROLLBACK TO SAVEPOINT A;
DELETE FROM t1 WHERE id = 2 LIMIT 6;
SELECT a FROM t1 WHERE id > 7;
COMMIT;
SELECT a FROM t1 WHERE id > 7 /* no additional predicate */;
SELECT id FROM t2 WHERE id < 6;
SELECT a FROM t1 WHERE id > 7 AND id > -16777216;
SELECT id FROM t2 WHERE id < 6 /* no additional predicate */;
SELECT id FROM t2 WHERE id < 6 AND id > -16777216;
COMMIT;
UPDATE t2 SET b = 6 WHERE 1 = 1 LIMIT 8;
COMMIT;
SELECT b FROM t2 WHERE a > 6;
INSERT INTO t2 ( a, b ) VALUES ( 3 , 0 );
UPDATE t1 SET id = 2 WHERE b = 9 LIMIT 4;
SELECT b FROM t2 WHERE a > 6 /* no additional predicate */;
SELECT b FROM t2 WHERE a > 6 AND id > -16777216;
DELETE FROM t2 WHERE a IN ( 5 , 7 , 6 ) LIMIT 1;
DELETE FROM t1 WHERE b IN ( 2 , 7 , 3 ) LIMIT 1;
SAVEPOINT A;
DELETE FROM t2 WHERE b BETWEEN 3 and 7 LIMIT 2;
DELETE FROM t2 WHERE id IN ( 3 , 7 , 6 ) LIMIT 6;
DELETE FROM t1 WHERE b = 8 LIMIT 0;
DELETE FROM t1 WHERE a = 1 LIMIT 3;
DELETE FROM t2 WHERE id < 8 LIMIT 9;
DELETE FROM t1 WHERE a < 9 LIMIT 3;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 3 );
DELETE FROM t1 WHERE b IN ( 7 , 0 , 1 ) LIMIT 9;
SELECT a FROM t1 WHERE id = 8;
SELECT a FROM t1 WHERE id = 8 /* no additional predicate */;
SELECT a FROM t1 WHERE id = 8 AND id > -16777216;
DELETE FROM t1 WHERE id > 5 LIMIT 0;
UPDATE t2 SET a = 4 WHERE 1 = 1 LIMIT 5;
SELECT id FROM t2 WHERE a > 6;
SELECT id FROM t2 WHERE a > 6 /* no additional predicate */;
SELECT id FROM t2 WHERE a > 6 AND id > -16777216;
UPDATE t1 SET id = 7 WHERE 1 = 1 LIMIT 6;
UPDATE t2 SET b = 0 WHERE a IN ( 5 , 9 , 3 ) LIMIT 1;
INSERT INTO t1 ( a, b ) VALUES ( 4 , 8 );
DELETE FROM t1 WHERE b > 8 LIMIT 1;
ROLLBACK;
UPDATE t1 SET id = 5 WHERE 1 = 1 LIMIT 5;
INSERT INTO t2 ( a, b ) VALUES ( 4 , 0 );
--error 1062
UPDATE t2 SET id = 4 WHERE 1 = 1 LIMIT 9;
DELETE FROM t1 WHERE id BETWEEN 0 and 0 LIMIT 7;
DELETE FROM t1 WHERE b IN ( 1 , 8 , 0 ) LIMIT 3;
COMMIT;
SELECT a FROM t1 WHERE id < 5;
START TRANSACTION;
INSERT INTO t1 ( a, b ) VALUES ( 6 , 9 );
SELECT a FROM t1 WHERE 1 = 1;
SAVEPOINT A;
SELECT a FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT a FROM t1 WHERE id < 5 /* no additional predicate */;
ROLLBACK TO SAVEPOINT A;
SELECT a FROM t1 WHERE 1 = 1 AND id > -16777216;
ROLLBACK TO SAVEPOINT A;
SELECT a FROM t1 WHERE id < 5 AND id > -16777216;
ROLLBACK;
SAVEPOINT A;
UPDATE t1 SET id = 7 WHERE b > 8 LIMIT 4;
ROLLBACK;
START TRANSACTION;
UPDATE t2 SET a = 8 WHERE id > 7 LIMIT 2;
START TRANSACTION;
DELETE FROM t2 WHERE id IN ( 5 , 1 , 3 ) LIMIT 7;
SELECT id FROM t1 WHERE a < 5;
DELETE FROM t2 WHERE id BETWEEN 6 and 9 LIMIT 6;
INSERT INTO t1 ( a, b ) VALUES ( 7 , 6 );
SELECT id FROM t1 WHERE a < 5 /* no additional predicate */;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 7 );
SELECT id FROM t1 WHERE a < 5 AND id > -16777216;
SELECT id FROM t1 WHERE 1 = 1;
UPDATE t1 SET a = 1 WHERE b BETWEEN 6 and 6 LIMIT 2;
SELECT id FROM t1 WHERE 1 = 1 /* no additional predicate */;
INSERT INTO t1 ( a, b ) VALUES ( 4 , 6 );
SELECT id FROM t1 WHERE 1 = 1 AND id > -16777216;
DELETE FROM t1 WHERE b BETWEEN 5 and 6 LIMIT 2;
ROLLBACK;
SELECT a FROM t1 WHERE b BETWEEN 9 and 4;
SELECT a FROM t1 WHERE a IN ( 8 , 7 , 2 );
SELECT a FROM t1 WHERE b BETWEEN 9 and 4 /* no additional predicate */;
INSERT INTO t1 ( a, b ) VALUES ( 3 , 6 );
SELECT a FROM t1 WHERE b BETWEEN 9 and 4 AND id > -16777216;
SELECT a FROM t1 WHERE a IN ( 8 , 7 , 2 ) /* no additional predicate */;
UPDATE t2 SET id = 9 WHERE a BETWEEN 6 and 1 LIMIT 8;
SELECT id FROM t1 WHERE id BETWEEN 1 and 4;
SELECT a FROM t1 WHERE a IN ( 8 , 7 , 2 ) AND id > -16777216;
SELECT id FROM t1 WHERE id BETWEEN 1 and 4 /* no additional predicate */;
SELECT id FROM t1 WHERE id BETWEEN 1 and 4 AND id > -16777216;
SELECT a FROM t2 WHERE b BETWEEN 7 and 3;
UPDATE t2 SET b = 6 WHERE b IN ( 7 , 6 , 4 ) LIMIT 9;
SELECT a FROM t2 WHERE b BETWEEN 7 and 3 /* no additional predicate */;
SELECT a FROM t2 WHERE b BETWEEN 7 and 3 AND id > -16777216;
SELECT id FROM t1 WHERE a BETWEEN 1 and 4;
SELECT id FROM t1 WHERE a BETWEEN 1 and 4 /* no additional predicate */;
UPDATE t2 SET a = 7 WHERE b = 9 LIMIT 6;
SELECT id FROM t1 WHERE a BETWEEN 1 and 4 AND id > -16777216;
SELECT id FROM t2 WHERE id BETWEEN 9 and 3;
UPDATE t1 SET b = 9 WHERE 1 = 1 LIMIT 6;
ROLLBACK TO SAVEPOINT A;
SELECT id FROM t2 WHERE id BETWEEN 9 and 3 /* no additional predicate */;
UPDATE t1 SET a = 7 WHERE 1 = 1 LIMIT 8;
SELECT id FROM t2 WHERE id BETWEEN 9 and 3 AND id > -16777216;
START TRANSACTION;
COMMIT;
SAVEPOINT A;
DELETE FROM t1 WHERE id BETWEEN 9 and 2 LIMIT 4;
SELECT b FROM t1 WHERE id BETWEEN 4 and 7;
SELECT b FROM t1 WHERE 1 = 1;
UPDATE t2 SET b = 5 WHERE b < 1 LIMIT 1;
SELECT b FROM t1 WHERE id BETWEEN 4 and 7 /* no additional predicate */;
SELECT b FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT b FROM t1 WHERE 1 = 1 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 5 );
SELECT b FROM t1 WHERE id BETWEEN 4 and 7 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 9 , 1 );
INSERT INTO t1 ( a, b ) VALUES ( 3 , 8 );
UPDATE t1 SET b = 8 WHERE 1 = 1 LIMIT 5;
SELECT a FROM t2 WHERE id < 9;
SELECT a FROM t2 WHERE id < 9 /* no additional predicate */;
SELECT a FROM t2 WHERE id < 9 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 1 , 0 );
SELECT id FROM t2 WHERE a < 2;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 6 );
SELECT id FROM t2 WHERE a < 2 /* no additional predicate */;
SELECT a FROM t2 WHERE id IN ( 2 , 8 , 8 );
DELETE FROM t2 WHERE a BETWEEN 2 and 1 LIMIT 2;
SELECT a FROM t2 WHERE id IN ( 2 , 8 , 8 ) /* no additional predicate */;
SELECT id FROM t2 WHERE a < 2 AND id > -16777216;
SELECT a FROM t2 WHERE id IN ( 2 , 8 , 8 ) AND id > -16777216;
START TRANSACTION;
INSERT INTO t1 ( a, b ) VALUES ( 8 , 4 );
START TRANSACTION;
DELETE FROM t1 WHERE a > 4 LIMIT 5;
ROLLBACK;
INSERT INTO t1 ( a, b ) VALUES ( 6 , 5 );
DELETE FROM t1 WHERE 1 = 1 LIMIT 0;
START TRANSACTION;
UPDATE t1 SET b = 3 WHERE a IN ( 7 , 1 , 1 ) LIMIT 7;
DELETE FROM t2 WHERE a < 4 LIMIT 2;
UPDATE t1 SET b = 2 WHERE 1 = 1 LIMIT 8;
--error 1062
UPDATE t2 SET id = 3 WHERE 1 = 1 LIMIT 3;
SELECT id FROM t1 WHERE a = 6;
SELECT id FROM t1 WHERE a = 6 /* no additional predicate */;
DELETE FROM t2 WHERE id > 5 LIMIT 2;
SELECT id FROM t1 WHERE a = 6 AND id > -16777216;
UPDATE t1 SET a = 5 WHERE id BETWEEN 2 and 4 LIMIT 2;
ROLLBACK TO SAVEPOINT A;
INSERT INTO t2 ( a, b ) VALUES ( 2 , 8 );
INSERT INTO t2 ( a, b ) VALUES ( 0 , 7 );
UPDATE t2 SET b = 0 WHERE b BETWEEN 6 and 3 LIMIT 9;
SELECT b FROM t1 WHERE a > 3;
ROLLBACK;
DELETE FROM t1 WHERE id > 1 LIMIT 4;
SELECT b FROM t1 WHERE a > 3 /* no additional predicate */;
ROLLBACK;
SELECT b FROM t1 WHERE a > 3 AND id > -16777216;
COMMIT;
SELECT a FROM t2 WHERE id < 6;
INSERT INTO t1 ( a, b ) VALUES ( 4 , 2 );
SELECT a FROM t2 WHERE id < 6 /* no additional predicate */;
INSERT INTO t2 ( a, b ) VALUES ( 5 , 8 );
SELECT b FROM t1 WHERE b BETWEEN 8 and 6;
SELECT a FROM t2 WHERE id < 6 AND id > -16777216;
DELETE FROM t1 WHERE a BETWEEN 6 and 5 LIMIT 4;
SELECT b FROM t1 WHERE b BETWEEN 8 and 6 /* no additional predicate */;
UPDATE t1 SET a = 4 WHERE id > 4 LIMIT 7;
SELECT a FROM t1 WHERE id > 0;
SELECT b FROM t1 WHERE b BETWEEN 8 and 6 AND id > -16777216;
SELECT a FROM t1 WHERE id > 0 /* no additional predicate */;
ROLLBACK;
SELECT a FROM t1 WHERE id > 0 AND id > -16777216;
SELECT id FROM t1 WHERE id = 7;
SELECT id FROM t1 WHERE id = 7 /* no additional predicate */;
SELECT b FROM t1 WHERE a BETWEEN 6 and 3;
SELECT id FROM t1 WHERE id = 7 AND id > -16777216;
SELECT b FROM t1 WHERE a BETWEEN 6 and 3 /* no additional predicate */;
SELECT b FROM t1 WHERE a BETWEEN 6 and 3 AND id > -16777216;
UPDATE t2 SET a = 6 WHERE id IN ( 4 , 3 , 0 ) LIMIT 2;
COMMIT;
SELECT id FROM t2 WHERE b > 5;
SELECT id FROM t2 WHERE b > 5 /* no additional predicate */;
SELECT id FROM t2 WHERE b > 5 AND id > -16777216;
SELECT a FROM t2 WHERE a = 8;
COMMIT;
SELECT a FROM t2 WHERE a = 8 /* no additional predicate */;
SELECT a FROM t2 WHERE a = 8 AND id > -16777216;
UPDATE t1 SET id = 9 WHERE a IN ( 1 , 2 , 5 ) LIMIT 4;
DELETE FROM t2 WHERE a IN ( 0 , 9 , 0 ) LIMIT 1;
UPDATE t2 SET a = 7 WHERE b = 2 LIMIT 7;
UPDATE t2 SET id = 6 WHERE a = 0 LIMIT 8;
INSERT INTO t1 ( a, b ) VALUES ( 3 , 1 );
DELETE FROM t2 WHERE b = 7 LIMIT 0;
DELETE FROM t1 WHERE id < 3 LIMIT 9;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 7 );
SELECT id FROM t1 WHERE b IN ( 8 , 1 , 7 );
START TRANSACTION;
SELECT id FROM t1 WHERE b IN ( 8 , 1 , 7 ) /* no additional predicate */;
SELECT id FROM t1 WHERE b IN ( 8 , 1 , 7 ) AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 3 , 7 );
INSERT INTO t1 ( a, b ) VALUES ( 2 , 2 );
SAVEPOINT A;
COMMIT;
DELETE FROM t1 WHERE 1 = 1 LIMIT 9;
UPDATE t1 SET id = 4 WHERE 1 = 1 LIMIT 4;
--error 1062
UPDATE t2 SET id = 2 WHERE 1 = 1 LIMIT 5;
ROLLBACK;
INSERT INTO t2 ( a, b ) VALUES ( 5 , 6 );
SELECT a FROM t1 WHERE 1 = 1;
ROLLBACK TO SAVEPOINT A;
SELECT a FROM t1 WHERE 1 = 1 /* no additional predicate */;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 3 );
SELECT a FROM t1 WHERE 1 = 1 AND id > -16777216;
UPDATE t2 SET a = 2 WHERE b > 3 LIMIT 4;
SELECT a FROM t1 WHERE id > 5;
SELECT a FROM t1 WHERE id > 5 /* no additional predicate */;
SELECT a FROM t1 WHERE id > 5 AND id > -16777216;
UPDATE t1 SET id = 1 WHERE 1 = 1 LIMIT 3;
UPDATE t1 SET b = 3 WHERE a < 1 LIMIT 5;
UPDATE t1 SET b = 8 WHERE a < 9 LIMIT 1;
UPDATE t2 SET id = 8 WHERE a BETWEEN 3 and 1 LIMIT 9;
UPDATE t2 SET a = 3 WHERE b < 2 LIMIT 6;
DELETE FROM t2 WHERE a IN ( 5 , 8 , 8 ) LIMIT 9;
DELETE FROM t2 WHERE a BETWEEN 3 and 0 LIMIT 8;
DELETE FROM t1 WHERE id < 8 LIMIT 7;
UPDATE t1 SET id = 4 WHERE b > 5 LIMIT 7;
DELETE FROM t1 WHERE b BETWEEN 9 and 2 LIMIT 2;
DELETE FROM t1 WHERE b = 6 LIMIT 9;
COMMIT;
ROLLBACK;
UPDATE t1 SET id = 2 WHERE a = 8 LIMIT 9;
INSERT INTO t1 ( a, b ) VALUES ( 5 , 1 );
INSERT INTO t1 ( a, b ) VALUES ( 2 , 4 );
SAVEPOINT A;
DELETE FROM t2 WHERE id < 3 LIMIT 9;
UPDATE t2 SET a = 7 WHERE 1 = 1 LIMIT 7;
COMMIT;
ROLLBACK;
INSERT INTO t1 ( a, b ) VALUES ( 5 , 6 );
INSERT INTO t1 ( a, b ) VALUES ( 4 , 1 );
SELECT b FROM t1 WHERE id BETWEEN 7 and 0;
SELECT b FROM t1 WHERE id BETWEEN 7 and 0 /* no additional predicate */;
SELECT b FROM t1 WHERE id BETWEEN 7 and 0 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 6 , 7 );
SELECT b FROM t2 WHERE a > 2;
SELECT b FROM t2 WHERE a > 2 /* no additional predicate */;
SELECT b FROM t2 WHERE a > 2 AND id > -16777216;
--error 1062
UPDATE t2 SET id = 7 WHERE b IN ( 2 , 6 , 8 ) LIMIT 3;
UPDATE t2 SET b = 5 WHERE a IN ( 1 , 5 , 0 ) LIMIT 9;
DELETE FROM t2 WHERE b > 8 LIMIT 9;
INSERT INTO t1 ( a, b ) VALUES ( 5 , 3 );
SELECT a FROM t2 WHERE id < 5;
DELETE FROM t2 WHERE id IN ( 0 , 2 , 9 ) LIMIT 5;
SELECT a FROM t2 WHERE id < 5 /* no additional predicate */;
SELECT a FROM t2 WHERE id < 5 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 6 );
INSERT INTO t2 ( a, b ) VALUES ( 7 , 3 );
SELECT id FROM t2 WHERE a > 2;
SELECT id FROM t2 WHERE a > 2 /* no additional predicate */;
SELECT id FROM t2 WHERE a > 2 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 1 , 9 );
INSERT INTO t1 ( a, b ) VALUES ( 1 , 0 );
UPDATE t1 SET a = 3 WHERE b < 4 LIMIT 8;
DELETE FROM t1 WHERE a < 8 LIMIT 2;
DELETE FROM t2 WHERE id < 8 LIMIT 0;
DELETE FROM t2 WHERE a = 9 LIMIT 4;
DELETE FROM t2 WHERE 1 = 1 LIMIT 7;
INSERT INTO t1 ( a, b ) VALUES ( 8 , 2 );
DELETE FROM t1 WHERE a IN ( 4 , 6 , 5 ) LIMIT 2;
DELETE FROM t1 WHERE a IN ( 8 , 9 , 8 ) LIMIT 9;
DELETE FROM t1 WHERE b IN ( 1 , 5 , 0 ) LIMIT 8;
UPDATE t1 SET a = 8 WHERE id > 3 LIMIT 6;
INSERT INTO t1 ( a, b ) VALUES ( 0 , 5 );
DELETE FROM t1 WHERE a IN ( 8 , 4 , 2 ) LIMIT 1;
SAVEPOINT A;
DELETE FROM t1 WHERE id < 2 LIMIT 0;
SELECT a FROM t1 WHERE 1 = 1;
SELECT a FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT a FROM t1 WHERE 1 = 1 AND id > -16777216;
UPDATE t2 SET b = 1 WHERE id < 3 LIMIT 3;
DELETE FROM t1 WHERE b < 6 LIMIT 3;
DELETE FROM t1 WHERE a BETWEEN 3 and 8 LIMIT 7;
SELECT b FROM t2 WHERE id = 6;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 9 );
SELECT b FROM t2 WHERE id = 6 /* no additional predicate */;
SELECT b FROM t2 WHERE id = 6 AND id > -16777216;
UPDATE t2 SET a = 3 WHERE id > 5 LIMIT 8;
SELECT b FROM t2 WHERE id BETWEEN 3 and 5;
DELETE FROM t2 WHERE 1 = 1 LIMIT 9;
SELECT b FROM t2 WHERE id BETWEEN 3 and 5 /* no additional predicate */;
SELECT b FROM t2 WHERE id BETWEEN 3 and 5 AND id > -16777216;
DELETE FROM t2 WHERE 1 = 1 LIMIT 7;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 7 );
DELETE FROM t2 WHERE b = 1 LIMIT 3;
INSERT INTO t2 ( a, b ) VALUES ( 9 , 5 );
SELECT id FROM t2 WHERE 1 = 1;
SELECT id FROM t2 WHERE b > 0;
SELECT id FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT id FROM t2 WHERE b > 0 /* no additional predicate */;
SELECT id FROM t2 WHERE 1 = 1 AND id > -16777216;
SELECT id FROM t2 WHERE b > 0 AND id > -16777216;
START TRANSACTION;
START TRANSACTION;
DELETE FROM t1 WHERE b > 7 LIMIT 6;
SELECT a FROM t2 WHERE 1 = 1;
UPDATE t2 SET a = 4 WHERE 1 = 1 LIMIT 3;
DELETE FROM t1 WHERE b < 6 LIMIT 1;
DELETE FROM t1 WHERE 1 = 1 LIMIT 2;
INSERT INTO t2 ( a, b ) VALUES ( 4 , 5 );
SELECT a FROM t2 WHERE 1 = 1 /* no additional predicate */;
UPDATE t1 SET a = 8 WHERE a < 7 LIMIT 5;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 8 );
SAVEPOINT A;
UPDATE t1 SET a = 9 WHERE 1 = 1 LIMIT 8;
SELECT a FROM t2 WHERE 1 = 1 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 3 , 4 );
SELECT b FROM t2 WHERE 1 = 1;
DELETE FROM t1 WHERE b BETWEEN 9 and 4 LIMIT 3;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 6 );
SELECT b FROM t2 WHERE 1 = 1 /* no additional predicate */;
DELETE FROM t2 WHERE id IN ( 8 , 3 , 6 ) LIMIT 5;
START TRANSACTION;
INSERT INTO t2 ( a, b ) VALUES ( 3 , 7 );
DELETE FROM t1 WHERE b > 2 LIMIT 7;
ROLLBACK TO SAVEPOINT A;
SELECT b FROM t2 WHERE 1 = 1 AND id > -16777216;
UPDATE t2 SET id = 7 WHERE id IN ( 8 , 0 , 3 ) LIMIT 0;
DELETE FROM t2 WHERE id BETWEEN 5 and 0 LIMIT 5;
DELETE FROM t2 WHERE 1 = 1 LIMIT 8;
DELETE FROM t1 WHERE b > 6 LIMIT 4;
UPDATE t2 SET a = 9 WHERE id IN ( 6 , 7 , 5 ) LIMIT 0;
UPDATE t2 SET a = 0 WHERE a > 1 LIMIT 3;
COMMIT;
START TRANSACTION;
DELETE FROM t1 WHERE 1 = 1 LIMIT 0;
SELECT id FROM t1 WHERE b < 7;
SELECT id FROM t1 WHERE b < 7 /* no additional predicate */;
SELECT a FROM t2 WHERE 1 = 1;
SELECT id FROM t1 WHERE b < 7 AND id > -16777216;
SELECT a FROM t2 WHERE 1 = 1 /* no additional predicate */;
DELETE FROM t1 WHERE b > 3 LIMIT 6;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 3 );
SELECT a FROM t2 WHERE 1 = 1;
SELECT a FROM t2 WHERE 1 = 1 AND id > -16777216;
SELECT a FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT a FROM t1 WHERE a = 4;
SELECT a FROM t1 WHERE a = 4 /* no additional predicate */;
SELECT a FROM t2 WHERE 1 = 1 AND id > -16777216;
SELECT a FROM t1 WHERE a = 4 AND id > -16777216;
SELECT a FROM t2 WHERE 1 = 1;
UPDATE t2 SET a = 3 WHERE a IN ( 4 , 7 , 2 ) LIMIT 1;
SELECT a FROM t2 WHERE 1 = 1 /* no additional predicate */;
DELETE FROM t1 WHERE b < 3 LIMIT 1;
UPDATE t1 SET a = 7 WHERE id > 3 LIMIT 1;
SELECT a FROM t2 WHERE 1 = 1 AND id > -16777216;
ROLLBACK;
START TRANSACTION;
ROLLBACK;
ROLLBACK;
START TRANSACTION;
DELETE FROM t2 WHERE id = 7 LIMIT 0;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 2 );
SELECT a FROM t1 WHERE b = 3;
SAVEPOINT A;
SELECT a FROM t1 WHERE b = 3 /* no additional predicate */;
INSERT INTO t2 ( a, b ) VALUES ( 8 , 7 );
DELETE FROM t1 WHERE a = 7 LIMIT 6;
SELECT b FROM t1 WHERE b IN ( 3 , 5 , 4 );
SELECT a FROM t1 WHERE b = 3 AND id > -16777216;
UPDATE t1 SET a = 6 WHERE b BETWEEN 8 and 1 LIMIT 7;
SELECT b FROM t1 WHERE b IN ( 3 , 5 , 4 ) /* no additional predicate */;
UPDATE t1 SET id = 5 WHERE a > 3 LIMIT 3;
SELECT b FROM t1 WHERE b IN ( 3 , 5 , 4 ) AND id > -16777216;
UPDATE t2 SET b = 6 WHERE a IN ( 8 , 3 , 0 ) LIMIT 2;
SAVEPOINT A;
COMMIT;
DELETE FROM t2 WHERE b < 3 LIMIT 1;
DELETE FROM t2 WHERE b < 0 LIMIT 5;
SELECT id FROM t2 WHERE b IN ( 9 , 7 , 2 );
SELECT id FROM t2 WHERE b IN ( 9 , 7 , 2 ) /* no additional predicate */;
SELECT a FROM t2 WHERE 1 = 1;
SELECT id FROM t2 WHERE b IN ( 9 , 7 , 2 ) AND id > -16777216;
SAVEPOINT A;
SELECT a FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT a FROM t2 WHERE 1 = 1 AND id > -16777216;
DELETE FROM t2 WHERE id < 9 LIMIT 4;
SELECT a FROM t1 WHERE a > 1;
SELECT a FROM t1 WHERE a > 1 /* no additional predicate */;
SELECT a FROM t1 WHERE a > 1 AND id > -16777216;
SELECT a FROM t2 WHERE b IN ( 0 , 7 , 6 );
SELECT a FROM t2 WHERE b IN ( 0 , 7 , 6 ) /* no additional predicate */;
START TRANSACTION;
SELECT a FROM t2 WHERE b IN ( 0 , 7 , 6 ) AND id > -16777216;
SELECT id FROM t2 WHERE id = 8;
SELECT id FROM t2 WHERE id = 8 /* no additional predicate */;
DELETE FROM t2 WHERE 1 = 1 LIMIT 4;
SELECT id FROM t2 WHERE id = 8 AND id > -16777216;
DELETE FROM t1 WHERE b > 2 LIMIT 5;
INSERT INTO t1 ( a, b ) VALUES ( 2 , 0 );
DELETE FROM t2 WHERE b > 4 LIMIT 4;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 9 );
INSERT INTO t2 ( a, b ) VALUES ( 5 , 6 );
INSERT INTO t2 ( a, b ) VALUES ( 2 , 5 );
SELECT a FROM t2 WHERE b < 8;
SELECT a FROM t2 WHERE b < 8 /* no additional predicate */;
SELECT a FROM t2 WHERE b < 8 AND id > -16777216;
SELECT id FROM t1 WHERE b > 7;
SELECT id FROM t1 WHERE b > 7 /* no additional predicate */;
SELECT id FROM t1 WHERE b > 7 AND id > -16777216;
DELETE FROM t2 WHERE a > 0 LIMIT 2;
DELETE FROM t1 WHERE b < 7 LIMIT 7;
UPDATE t1 SET id = 3 WHERE 1 = 1 LIMIT 1;
DELETE FROM t2 WHERE b = 1 LIMIT 8;
UPDATE t1 SET id = 5 WHERE a < 1 LIMIT 8;
SELECT a FROM t1 WHERE id > 2;
SELECT a FROM t1 WHERE id BETWEEN 4 and 0;
SELECT a FROM t1 WHERE id > 2 /* no additional predicate */;
SELECT a FROM t1 WHERE id > 7;
SELECT a FROM t1 WHERE id BETWEEN 4 and 0 /* no additional predicate */;
SELECT a FROM t1 WHERE id > 2 AND id > -16777216;
DELETE FROM t1 WHERE id BETWEEN 2 and 5 LIMIT 3;
SELECT a FROM t1 WHERE id > 7 /* no additional predicate */;
SELECT a FROM t1 WHERE id BETWEEN 4 and 0 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 2 );
SELECT a FROM t1 WHERE id > 7 AND id > -16777216;
SELECT b FROM t1 WHERE b BETWEEN 3 and 4;
UPDATE t1 SET a = 7 WHERE b BETWEEN 6 and 3 LIMIT 2;
SELECT b FROM t1 WHERE b BETWEEN 3 and 4 /* no additional predicate */;
INSERT INTO t1 ( a, b ) VALUES ( 6 , 0 );
UPDATE t1 SET b = 2 WHERE 1 = 1 LIMIT 9;
SELECT b FROM t1 WHERE b BETWEEN 3 and 4 AND id > -16777216;
UPDATE t1 SET b = 2 WHERE id = 4 LIMIT 0;
INSERT INTO t1 ( a, b ) VALUES ( 0 , 3 );
UPDATE t2 SET a = 8 WHERE a > 0 LIMIT 0;
COMMIT;
SELECT b FROM t1 WHERE 1 = 1;
SELECT b FROM t1 WHERE 1 = 1 /* no additional predicate */;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 4 );
SELECT b FROM t1 WHERE b = 7;
SELECT b FROM t1 WHERE 1 = 1 AND id > -16777216;
SELECT b FROM t1 WHERE b = 7 /* no additional predicate */;
INSERT INTO t2 ( a, b ) VALUES ( 5 , 7 );
SELECT b FROM t1 WHERE b = 7 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 2 );
DELETE FROM t2 WHERE a BETWEEN 8 and 4 LIMIT 5;
SELECT a FROM t1 WHERE b = 4;
UPDATE t1 SET b = 1 WHERE b > 4 LIMIT 4;
SELECT a FROM t1 WHERE b = 4 /* no additional predicate */;
UPDATE t1 SET b = 4 WHERE b IN ( 0 , 9 , 4 ) LIMIT 4;
SELECT a FROM t1 WHERE b = 4 AND id > -16777216;
ROLLBACK TO SAVEPOINT A;
INSERT INTO t2 ( a, b ) VALUES ( 8 , 7 );
SELECT id FROM t2 WHERE 1 = 1;
UPDATE t1 SET b = 8 WHERE a = 7 LIMIT 2;
DELETE FROM t1 WHERE 1 = 1 LIMIT 7;
SELECT id FROM t2 WHERE 1 = 1 /* no additional predicate */;
START TRANSACTION;
COMMIT;
SELECT id FROM t2 WHERE a > 9;
SELECT id FROM t2 WHERE 1 = 1 AND id > -16777216;
DELETE FROM t2 WHERE 1 = 1 LIMIT 4;
SELECT id FROM t2 WHERE a > 9 /* no additional predicate */;
SELECT id FROM t2 WHERE id IN ( 3 , 3 , 2 );
UPDATE t1 SET a = 7 WHERE a > 9 LIMIT 7;
SELECT id FROM t2 WHERE id IN ( 3 , 3 , 2 ) /* no additional predicate */;
SELECT id FROM t2 WHERE id IN ( 3 , 3 , 2 ) AND id > -16777216;
SELECT id FROM t2 WHERE a > 9 AND id > -16777216;
UPDATE t1 SET b = 6 WHERE id IN ( 4 , 7 , 6 ) LIMIT 3;
SELECT b FROM t1 WHERE id BETWEEN 6 and 8;
SELECT b FROM t1 WHERE id BETWEEN 6 and 8 /* no additional predicate */;
START TRANSACTION;
SELECT b FROM t1 WHERE id BETWEEN 6 and 8 AND id > -16777216;
COMMIT;
DELETE FROM t2 WHERE a BETWEEN 0 and 1 LIMIT 3;
SELECT b FROM t1 WHERE b IN ( 7 , 1 , 5 );
SELECT b FROM t1 WHERE b IN ( 7 , 1 , 5 ) /* no additional predicate */;
DELETE FROM t1 WHERE a < 6 LIMIT 1;
SELECT b FROM t1 WHERE b IN ( 7 , 1 , 5 ) AND id > -16777216;
SELECT b FROM t2 WHERE b BETWEEN 5 and 3;
ROLLBACK TO SAVEPOINT A;
SELECT b FROM t2 WHERE b BETWEEN 5 and 3 /* no additional predicate */;
ROLLBACK TO SAVEPOINT A;
SELECT b FROM t2 WHERE b BETWEEN 5 and 3 AND id > -16777216;
UPDATE t1 SET a = 1 WHERE b > 8 LIMIT 4;
ROLLBACK TO SAVEPOINT A;
SELECT a FROM t2 WHERE a BETWEEN 9 and 7;
UPDATE t2 SET id = 8 WHERE 1 = 1 LIMIT 7;
SELECT a FROM t2 WHERE a BETWEEN 9 and 7 /* no additional predicate */;
SELECT a FROM t2 WHERE a BETWEEN 9 and 7 AND id > -16777216;
SELECT b FROM t2 WHERE a > 8;
SELECT b FROM t1 WHERE 1 = 1;
SELECT b FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT b FROM t2 WHERE a > 8 /* no additional predicate */;
SELECT b FROM t1 WHERE 1 = 1 AND id > -16777216;
SELECT b FROM t2 WHERE a > 8 AND id > -16777216;
DELETE FROM t2 WHERE b = 3 LIMIT 7;
SAVEPOINT A;
SELECT id FROM t2 WHERE id < 7;
INSERT INTO t2 ( a, b ) VALUES ( 8 , 3 );
SELECT id FROM t2 WHERE id < 7 /* no additional predicate */;
UPDATE t2 SET id = 8 WHERE b > 7 LIMIT 0;
SELECT id FROM t2 WHERE id < 7 AND id > -16777216;
START TRANSACTION;
UPDATE t1 SET b = 0 WHERE id > 0 LIMIT 9;
COMMIT;
DELETE FROM t1 WHERE id < 4 LIMIT 2;
ROLLBACK;
UPDATE t1 SET id = 2 WHERE id < 6 LIMIT 3;
INSERT INTO t1 ( a, b ) VALUES ( 5 , 5 );
SELECT a FROM t1 WHERE b = 3;
--error 1062
UPDATE t2 SET id = 1 WHERE a > 3 LIMIT 6;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 2 );
SELECT a FROM t1 WHERE b = 3 /* no additional predicate */;
SAVEPOINT A;
SELECT a FROM t1 WHERE b = 3 AND id > -16777216;
ROLLBACK TO SAVEPOINT A;
SELECT id FROM t1 WHERE a IN ( 2 , 8 , 3 );
START TRANSACTION;
SELECT id FROM t1 WHERE a IN ( 2 , 8 , 3 ) /* no additional predicate */;
SELECT id FROM t1 WHERE a IN ( 2 , 8 , 3 ) AND id > -16777216;
UPDATE t2 SET b = 1 WHERE b > 7 LIMIT 5;
DELETE FROM t2 WHERE a = 5 LIMIT 3;
SELECT id FROM t1 WHERE a = 6;
SELECT id FROM t1 WHERE a = 6 /* no additional predicate */;
SELECT id FROM t1 WHERE a = 6 AND id > -16777216;
SELECT b FROM t1 WHERE 1 = 1;
SELECT b FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT b FROM t1 WHERE 1 = 1 AND id > -16777216;
DELETE FROM t2 WHERE id = 0 LIMIT 7;
UPDATE t1 SET a = 8 WHERE 1 = 1 LIMIT 8;
SAVEPOINT A;
UPDATE t1 SET a = 2 WHERE a IN ( 9 , 5 , 9 ) LIMIT 4;
DELETE FROM t1 WHERE a < 7 LIMIT 0;
DELETE FROM t2 WHERE id = 2 LIMIT 7;
SELECT a FROM t2 WHERE b > 5;
DELETE FROM t2 WHERE id > 0 LIMIT 6;
SELECT a FROM t2 WHERE b > 5 /* no additional predicate */;
SELECT a FROM t2 WHERE b > 5 AND id > -16777216;
SELECT a FROM t2 WHERE a > 2;
SELECT a FROM t2 WHERE a > 2 /* no additional predicate */;
SELECT a FROM t2 WHERE a > 2 AND id > -16777216;
DELETE FROM t1 WHERE b > 7 LIMIT 8;
ROLLBACK;
SELECT a FROM t1 WHERE 1 = 1;
SELECT b FROM t1 WHERE a IN ( 9 , 7 , 3 );
SELECT a FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT b FROM t1 WHERE a IN ( 9 , 7 , 3 ) /* no additional predicate */;
SELECT a FROM t1 WHERE 1 = 1 AND id > -16777216;
SELECT b FROM t1 WHERE a IN ( 9 , 7 , 3 ) AND id > -16777216;
ROLLBACK TO SAVEPOINT A;
UPDATE t2 SET b = 6 WHERE a < 5 LIMIT 4;
UPDATE t1 SET b = 3 WHERE id = 1 LIMIT 1;
DELETE FROM t1 WHERE b > 4 LIMIT 3;
DELETE FROM t1 WHERE 1 = 1 LIMIT 8;
SAVEPOINT A;
SELECT b FROM t2 WHERE b BETWEEN 8 and 3;
SELECT b FROM t2 WHERE b BETWEEN 8 and 3 /* no additional predicate */;
INSERT INTO t2 ( a, b ) VALUES ( 5 , 3 );
SELECT b FROM t2 WHERE b BETWEEN 8 and 3 AND id > -16777216;
UPDATE t2 SET b = 7 WHERE b = 6 LIMIT 8;
DELETE FROM t2 WHERE 1 = 1 LIMIT 2;
ROLLBACK;
UPDATE t1 SET a = 2 WHERE id > 1 LIMIT 5;
COMMIT;
UPDATE t1 SET a = 6 WHERE b < 3 LIMIT 7;
UPDATE t1 SET b = 7 WHERE 1 = 1 LIMIT 9;
INSERT INTO t2 ( a, b ) VALUES ( 2 , 4 );
UPDATE t1 SET b = 2 WHERE id > 2 LIMIT 5;
UPDATE t1 SET id = 1 WHERE id BETWEEN 1 and 5 LIMIT 7;
SELECT b FROM t1 WHERE b IN ( 1 , 7 , 5 );
INSERT INTO t2 ( a, b ) VALUES ( 1 , 2 );
SELECT b FROM t1 WHERE b IN ( 1 , 7 , 5 ) /* no additional predicate */;
SELECT b FROM t1 WHERE b IN ( 1 , 7 , 5 ) AND id > -16777216;
SELECT id FROM t2 WHERE b < 7;
SELECT id FROM t2 WHERE b < 7 /* no additional predicate */;
SELECT b FROM t2 WHERE id > 1;
SELECT id FROM t2 WHERE b < 7 AND id > -16777216;
SELECT b FROM t2 WHERE id > 1 /* no additional predicate */;
SELECT b FROM t1 WHERE id = 5;
SELECT b FROM t1 WHERE id = 5 /* no additional predicate */;
SELECT b FROM t1 WHERE id = 5 AND id > -16777216;
SELECT b FROM t2 WHERE id > 1 AND id > -16777216;
DELETE FROM t1 WHERE b < 4 LIMIT 7;
SAVEPOINT A;
DELETE FROM t2 WHERE a < 0 LIMIT 2;
SELECT a FROM t1 WHERE b < 6;
START TRANSACTION;
INSERT INTO t2 ( a, b ) VALUES ( 4 , 2 );
SELECT a FROM t1 WHERE b < 6 /* no additional predicate */;
UPDATE t1 SET b = 5 WHERE 1 = 1 LIMIT 4;
SELECT a FROM t1 WHERE b < 6 AND id > -16777216;
UPDATE t1 SET b = 3 WHERE a IN ( 1 , 2 , 4 ) LIMIT 5;
--error 1062
UPDATE t2 SET id = 3 WHERE 1 = 1 LIMIT 6;
START TRANSACTION;
DELETE FROM t1 WHERE a > 0 LIMIT 7;
SELECT a FROM t1 WHERE a BETWEEN 4 and 8;
UPDATE t2 SET b = 2 WHERE 1 = 1 LIMIT 4;
SELECT a FROM t1 WHERE a BETWEEN 4 and 8 /* no additional predicate */;
SELECT a FROM t1 WHERE b > 2;
SELECT a FROM t1 WHERE b > 2 /* no additional predicate */;
SELECT a FROM t1 WHERE a BETWEEN 4 and 8 AND id > -16777216;
SELECT a FROM t1 WHERE b > 2 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 8 );
INSERT INTO t1 ( a, b ) VALUES ( 8 , 1 );
SELECT a FROM t2 WHERE id IN ( 6 , 8 , 6 );
DELETE FROM t2 WHERE b < 3 LIMIT 2;
SELECT a FROM t2 WHERE id IN ( 6 , 8 , 6 ) /* no additional predicate */;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 4 );
SELECT a FROM t2 WHERE id IN ( 6 , 8 , 6 ) AND id > -16777216;
START TRANSACTION;
INSERT INTO t1 ( a, b ) VALUES ( 2 , 2 );
SAVEPOINT A;
UPDATE t1 SET id = 3 WHERE id BETWEEN 9 and 8 LIMIT 3;
DELETE FROM t2 WHERE b = 0 LIMIT 4;
DELETE FROM t2 WHERE id = 9 LIMIT 2;
DELETE FROM t1 WHERE id < 9 LIMIT 9;
DELETE FROM t2 WHERE b = 0 LIMIT 5;
UPDATE t1 SET b = 0 WHERE a BETWEEN 8 and 5 LIMIT 0;
DELETE FROM t2 WHERE id = 3 LIMIT 0;
UPDATE t1 SET b = 1 WHERE b = 8 LIMIT 4;
SELECT a FROM t1 WHERE 1 = 1;
SELECT b FROM t2 WHERE b > 2;
SELECT a FROM t1 WHERE 1 = 1 /* no additional predicate */;
DELETE FROM t1 WHERE a IN ( 9 , 5 , 3 ) LIMIT 3;
SELECT b FROM t2 WHERE b > 2 /* no additional predicate */;
SELECT a FROM t1 WHERE 1 = 1 AND id > -16777216;
SELECT id FROM t2 WHERE b > 9;
SELECT b FROM t2 WHERE b > 2 AND id > -16777216;
UPDATE t2 SET id = 2 WHERE a IN ( 4 , 8 , 7 ) LIMIT 1;
SELECT id FROM t2 WHERE b > 9 /* no additional predicate */;
DELETE FROM t1 WHERE id = 5 LIMIT 1;
SELECT id FROM t2 WHERE 1 = 1;
INSERT INTO t2 ( a, b ) VALUES ( 4 , 7 );
SELECT id FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT id FROM t2 WHERE b > 9 AND id > -16777216;
COMMIT;
SELECT id FROM t2 WHERE 1 = 1 AND id > -16777216;
SELECT id FROM t1 WHERE b = 7;
SELECT id FROM t1 WHERE b = 7 /* no additional predicate */;
UPDATE t1 SET b = 8 WHERE b IN ( 0 , 5 , 9 ) LIMIT 7;
UPDATE t1 SET a = 2 WHERE b BETWEEN 2 and 7 LIMIT 8;
SELECT id FROM t1 WHERE b = 7 AND id > -16777216;
ROLLBACK TO SAVEPOINT A;
INSERT INTO t1 ( a, b ) VALUES ( 0 , 3 );
INSERT INTO t1 ( a, b ) VALUES ( 0 , 5 );
SELECT b FROM t2 WHERE a > 6;
DELETE FROM t1 WHERE a < 2 LIMIT 1;
SELECT b FROM t2 WHERE a > 6 /* no additional predicate */;
COMMIT;
ROLLBACK TO SAVEPOINT A;
SELECT b FROM t2 WHERE a > 6 AND id > -16777216;
DELETE FROM t1 WHERE id > 0 LIMIT 5;
DELETE FROM t1 WHERE a BETWEEN 9 and 2 LIMIT 1;
UPDATE t2 SET b = 6 WHERE a < 3 LIMIT 0;
--error 1062
UPDATE t2 SET id = 5 WHERE 1 = 1 LIMIT 3;
UPDATE t2 SET a = 5 WHERE 1 = 1 LIMIT 9;
SELECT id FROM t2 WHERE a < 7;
UPDATE t1 SET a = 9 WHERE a = 9 LIMIT 1;
SAVEPOINT A;
SELECT id FROM t2 WHERE a < 7 /* no additional predicate */;
SELECT a FROM t1 WHERE id BETWEEN 1 and 5;
SELECT id FROM t2 WHERE a < 7 AND id > -16777216;
SELECT a FROM t1 WHERE id BETWEEN 1 and 5 /* no additional predicate */;
SELECT a FROM t1 WHERE id BETWEEN 1 and 5 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 2 , 6 );
INSERT INTO t2 ( a, b ) VALUES ( 3 , 6 );
DELETE FROM t2 WHERE 1 = 1 LIMIT 3;
SELECT b FROM t2 WHERE b = 6;
SELECT b FROM t2 WHERE b = 6 /* no additional predicate */;
SELECT b FROM t2 WHERE b = 6 AND id > -16777216;
SELECT id FROM t1 WHERE id > 1;
SELECT id FROM t1 WHERE id > 1 /* no additional predicate */;
SELECT id FROM t1 WHERE id > 1 AND id > -16777216;
SELECT a FROM t1 WHERE id < 8;
SELECT a FROM t1 WHERE id < 8 /* no additional predicate */;
SELECT a FROM t1 WHERE id < 8 AND id > -16777216;
UPDATE t1 SET id = 8 WHERE a IN ( 3 , 4 , 7 ) LIMIT 7;
DELETE FROM t1 WHERE a > 0 LIMIT 6;
DELETE FROM t2 WHERE b > 4 LIMIT 0;
ROLLBACK TO SAVEPOINT A;
UPDATE t2 SET a = 9 WHERE a < 3 LIMIT 5;
SELECT id FROM t2 WHERE id < 6;
SELECT id FROM t2 WHERE id < 6 /* no additional predicate */;
SELECT id FROM t2 WHERE id < 6 AND id > -16777216;
DELETE FROM t1 WHERE a IN ( 6 , 8 , 0 ) LIMIT 1;
DELETE FROM t2 WHERE id < 4 LIMIT 4;
DELETE FROM t1 WHERE a < 5 LIMIT 2;
DELETE FROM t1 WHERE b > 1 LIMIT 9;
SELECT b FROM t1 WHERE a IN ( 9 , 9 , 7 );
SELECT b FROM t1 WHERE a IN ( 9 , 9 , 7 ) /* no additional predicate */;
UPDATE t1 SET id = 1 WHERE b BETWEEN 7 and 3 LIMIT 0;
SELECT b FROM t1 WHERE a IN ( 9 , 9 , 7 ) AND id > -16777216;
DELETE FROM t2 WHERE a = 2 LIMIT 0;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 6 );
DELETE FROM t2 WHERE b < 8 LIMIT 5;
ROLLBACK TO SAVEPOINT A;
SELECT b FROM t2 WHERE 1 = 1;
SELECT b FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT b FROM t2 WHERE 1 = 1 AND id > -16777216;
COMMIT;
INSERT INTO t1 ( a, b ) VALUES ( 5 , 2 );
UPDATE t1 SET id = 2 WHERE b > 5 LIMIT 9;
SELECT a FROM t1 WHERE a BETWEEN 9 and 2;
SELECT a FROM t1 WHERE a BETWEEN 9 and 2 /* no additional predicate */;
SELECT a FROM t1 WHERE a BETWEEN 9 and 2 AND id > -16777216;
DELETE FROM t1 WHERE b = 5 LIMIT 2;
ROLLBACK;
DELETE FROM t2 WHERE a < 1 LIMIT 2;
DELETE FROM t2 WHERE b < 4 LIMIT 7;
DELETE FROM t1 WHERE b IN ( 0 , 8 , 7 ) LIMIT 4;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 7 );
SELECT b FROM t2 WHERE 1 = 1;
DELETE FROM t2 WHERE b > 0 LIMIT 5;
DELETE FROM t1 WHERE a = 6 LIMIT 8;
SELECT b FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT a FROM t1 WHERE b BETWEEN 7 and 1;
SELECT a FROM t1 WHERE b BETWEEN 7 and 1 /* no additional predicate */;
SELECT a FROM t1 WHERE b BETWEEN 7 and 1 AND id > -16777216;
SELECT b FROM t2 WHERE 1 = 1 AND id > -16777216;
SELECT a FROM t2 WHERE 1 = 1;
SELECT a FROM t2 WHERE 1 = 1 /* no additional predicate */;
DELETE FROM t2 WHERE id > 5 LIMIT 6;
INSERT INTO t1 ( a, b ) VALUES ( 0 , 7 );
SELECT a FROM t2 WHERE 1 = 1 AND id > -16777216;
SELECT b FROM t1 WHERE b < 1;
SELECT b FROM t1 WHERE b < 1 /* no additional predicate */;
SELECT b FROM t1 WHERE b < 1 AND id > -16777216;
COMMIT;
START TRANSACTION;
DELETE FROM t2 WHERE b < 1 LIMIT 9;
DELETE FROM t1 WHERE id BETWEEN 2 and 7 LIMIT 5;
DELETE FROM t2 WHERE a IN ( 1 , 9 , 1 ) LIMIT 9;
START TRANSACTION;
INSERT INTO t1 ( a, b ) VALUES ( 6 , 2 );
INSERT INTO t2 ( a, b ) VALUES ( 1 , 6 );
SELECT b FROM t2 WHERE id IN ( 8 , 5 , 1 );
INSERT INTO t2 ( a, b ) VALUES ( 4 , 7 );
SELECT b FROM t2 WHERE id IN ( 8 , 5 , 1 ) /* no additional predicate */;
UPDATE t1 SET a = 2 WHERE id BETWEEN 8 and 3 LIMIT 6;
INSERT INTO t1 ( a, b ) VALUES ( 2 , 8 );
SELECT b FROM t2 WHERE id IN ( 8 , 5 , 1 ) AND id > -16777216;
DELETE FROM t2 WHERE 1 = 1 LIMIT 3;
UPDATE t2 SET id = 5 WHERE id BETWEEN 1 and 2 LIMIT 5;
DELETE FROM t1 WHERE b < 2 LIMIT 6;
DELETE FROM t2 WHERE a > 4 LIMIT 7;
SELECT a FROM t1 WHERE b IN ( 7 , 7 , 9 );
START TRANSACTION;
SELECT a FROM t1 WHERE b IN ( 7 , 7 , 9 ) /* no additional predicate */;
SELECT id FROM t2 WHERE b = 1;
SELECT a FROM t1 WHERE b IN ( 7 , 7 , 9 ) AND id > -16777216;
SELECT id FROM t2 WHERE b = 1 /* no additional predicate */;
SAVEPOINT A;
SELECT id FROM t2 WHERE b = 1 AND id > -16777216;
UPDATE t2 SET a = 5 WHERE b = 8 LIMIT 4;
UPDATE t2 SET a = 7 WHERE id BETWEEN 5 and 1 LIMIT 1;
DELETE FROM t2 WHERE id < 4 LIMIT 6;
DELETE FROM t2 WHERE b IN ( 9 , 3 , 2 ) LIMIT 1;
UPDATE t2 SET id = 2 WHERE 1 = 1 LIMIT 0;
INSERT INTO t1 ( a, b ) VALUES ( 7 , 4 );
INSERT INTO t1 ( a, b ) VALUES ( 3 , 4 );
SELECT b FROM t2 WHERE b = 3;
UPDATE t2 SET b = 7 WHERE a IN ( 0 , 3 , 5 ) LIMIT 6;
INSERT INTO t2 ( a, b ) VALUES ( 1 , 4 );
SELECT b FROM t2 WHERE b = 3 /* no additional predicate */;
INSERT INTO t2 ( a, b ) VALUES ( 4 , 9 );
UPDATE t2 SET id = 3 WHERE a < 3 LIMIT 1;
UPDATE t2 SET id = 6 WHERE id = 6 LIMIT 2;
SELECT b FROM t2 WHERE b = 3 AND id > -16777216;
ROLLBACK TO SAVEPOINT A;
DELETE FROM t1 WHERE id = 3 LIMIT 6;
COMMIT;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 7 );
COMMIT;
INSERT INTO t1 ( a, b ) VALUES ( 3 , 5 );
SELECT b FROM t1 WHERE b IN ( 4 , 7 , 7 );
SELECT b FROM t1 WHERE b IN ( 4 , 7 , 7 ) /* no additional predicate */;
UPDATE t1 SET a = 1 WHERE 1 = 1 LIMIT 5;
SELECT b FROM t1 WHERE b IN ( 4 , 7 , 7 ) AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 4 , 4 );
DELETE FROM t1 WHERE a IN ( 3 , 2 , 4 ) LIMIT 8;
SAVEPOINT A;
UPDATE t2 SET a = 5 WHERE id < 9 LIMIT 2;
COMMIT;
SELECT id FROM t1 WHERE a IN ( 0 , 5 , 3 );
COMMIT;
SELECT id FROM t1 WHERE a IN ( 0 , 5 , 3 ) /* no additional predicate */;
INSERT INTO t1 ( a, b ) VALUES ( 7 , 1 );
SELECT id FROM t1 WHERE a IN ( 0 , 5 , 3 ) AND id > -16777216;
SELECT b FROM t2 WHERE a > 7;
SELECT b FROM t2 WHERE a > 7 /* no additional predicate */;
SELECT b FROM t2 WHERE a > 7 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 7 , 4 );
DELETE FROM t2 WHERE id IN ( 3 , 0 , 8 ) LIMIT 9;
COMMIT;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 1 );
ROLLBACK TO SAVEPOINT A;
INSERT INTO t1 ( a, b ) VALUES ( 4 , 7 );
SAVEPOINT A;
SELECT a FROM t1 WHERE a IN ( 4 , 4 , 2 );
SELECT a FROM t1 WHERE a IN ( 4 , 4 , 2 ) /* no additional predicate */;
SELECT a FROM t1 WHERE a IN ( 4 , 4 , 2 ) AND id > -16777216;
DELETE FROM t1 WHERE id = 1 LIMIT 5;
INSERT INTO t2 ( a, b ) VALUES ( 5 , 3 );
UPDATE t1 SET b = 8 WHERE a BETWEEN 9 and 9 LIMIT 5;
START TRANSACTION;
DELETE FROM t1 WHERE b BETWEEN 2 and 3 LIMIT 7;
DELETE FROM t2 WHERE b BETWEEN 7 and 1 LIMIT 6;
SELECT a FROM t1 WHERE id > 4;
SELECT id FROM t1 WHERE id < 3;
SELECT a FROM t1 WHERE id > 4 /* no additional predicate */;
SELECT id FROM t1 WHERE id < 3 /* no additional predicate */;
SELECT a FROM t1 WHERE id > 4 AND id > -16777216;
SELECT id FROM t1 WHERE id < 3 AND id > -16777216;
UPDATE t1 SET b = 2 WHERE id IN ( 2 , 0 , 9 ) LIMIT 2;
UPDATE t2 SET id = 8 WHERE id IN ( 0 , 8 , 7 ) LIMIT 4;
DELETE FROM t2 WHERE id BETWEEN 3 and 5 LIMIT 4;
INSERT INTO t2 ( a, b ) VALUES ( 1 , 4 );
SELECT id FROM t2 WHERE a BETWEEN 7 and 6;
START TRANSACTION;
SELECT id FROM t2 WHERE a BETWEEN 7 and 6 /* no additional predicate */;
DELETE FROM t2 WHERE id IN ( 5 , 2 , 5 ) LIMIT 0;
SELECT id FROM t2 WHERE a BETWEEN 7 and 6 AND id > -16777216;
UPDATE t1 SET id = 3 WHERE id = 0 LIMIT 0;
INSERT INTO t1 ( a, b ) VALUES ( 3 , 1 );
INSERT INTO t1 ( a, b ) VALUES ( 5 , 5 );
SELECT id FROM t2 WHERE id IN ( 8 , 2 , 7 );
SELECT id FROM t2 WHERE id IN ( 8 , 2 , 7 ) /* no additional predicate */;
DELETE FROM t2 WHERE a = 4 LIMIT 7;
SELECT id FROM t2 WHERE id IN ( 8 , 2 , 7 ) AND id > -16777216;
--error 1062
UPDATE t2 SET id = 7 WHERE 1 = 1 LIMIT 6;
DELETE FROM t1 WHERE id > 7 LIMIT 8;
SELECT b FROM t1 WHERE b < 3;
SELECT b FROM t1 WHERE b < 3 /* no additional predicate */;
SELECT b FROM t1 WHERE b < 3 AND id > -16777216;
SELECT id FROM t2 WHERE id < 8;
SELECT id FROM t2 WHERE id < 8 /* no additional predicate */;
SELECT id FROM t2 WHERE id < 8 AND id > -16777216;
UPDATE t2 SET a = 8 WHERE b BETWEEN 4 and 9 LIMIT 5;
SELECT a FROM t2 WHERE b IN ( 9 , 5 , 4 );
SELECT a FROM t2 WHERE b IN ( 9 , 5 , 4 ) /* no additional predicate */;
SELECT a FROM t2 WHERE b IN ( 9 , 5 , 4 ) AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 7 , 1 );
UPDATE t2 SET b = 2 WHERE 1 = 1 LIMIT 8;
COMMIT;
SELECT id FROM t1 WHERE b BETWEEN 0 and 2;
SELECT id FROM t1 WHERE b BETWEEN 0 and 2 /* no additional predicate */;
SELECT id FROM t1 WHERE b BETWEEN 0 and 2 AND id > -16777216;
DELETE FROM t2 WHERE id > 6 LIMIT 2;
DELETE FROM t2 WHERE id > 0 LIMIT 9;
UPDATE t2 SET b = 2 WHERE id < 7 LIMIT 6;
DELETE FROM t2 WHERE id BETWEEN 0 and 9 LIMIT 2;
UPDATE t1 SET b = 2 WHERE 1 = 1 LIMIT 7;
ROLLBACK;
DELETE FROM t2 WHERE a IN ( 5 , 5 , 7 ) LIMIT 7;
SELECT a FROM t1 WHERE id < 5;
SELECT a FROM t2 WHERE b BETWEEN 1 and 6;
START TRANSACTION;
SELECT a FROM t1 WHERE id < 5 /* no additional predicate */;
SELECT a FROM t2 WHERE b BETWEEN 1 and 6 /* no additional predicate */;
SELECT a FROM t1 WHERE id < 5 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 3 , 5 );
SELECT a FROM t2 WHERE b BETWEEN 1 and 6 AND id > -16777216;
UPDATE t1 SET b = 3 WHERE a = 7 LIMIT 1;
SELECT id FROM t2 WHERE 1 = 1;
SELECT id FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT id FROM t2 WHERE 1 = 1 AND id > -16777216;
SELECT id FROM t2 WHERE id IN ( 1 , 0 , 3 );
SELECT id FROM t2 WHERE id IN ( 1 , 0 , 3 ) /* no additional predicate */;
SELECT id FROM t2 WHERE id IN ( 1 , 0 , 3 ) AND id > -16777216;
SELECT b FROM t1 WHERE b = 5;
SELECT b FROM t1 WHERE b = 5 /* no additional predicate */;
SELECT b FROM t1 WHERE b = 5 AND id > -16777216;
SELECT id FROM t2 WHERE id > 3;
SELECT id FROM t2 WHERE id > 3 /* no additional predicate */;
SELECT id FROM t2 WHERE id > 3 AND id > -16777216;
DELETE FROM t1 WHERE b > 6 LIMIT 4;
SELECT id FROM t2 WHERE 1 = 1;
SELECT id FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT id FROM t2 WHERE 1 = 1 AND id > -16777216;
ROLLBACK TO SAVEPOINT A;
SELECT a FROM t1 WHERE b BETWEEN 0 and 8;
SELECT a FROM t1 WHERE b BETWEEN 0 and 8 /* no additional predicate */;
SELECT a FROM t1 WHERE b BETWEEN 0 and 8 AND id > -16777216;
UPDATE t1 SET id = 3 WHERE b IN ( 5 , 4 , 0 ) LIMIT 3;
DELETE FROM t1 WHERE id < 7 LIMIT 3;
SELECT id FROM t2 WHERE id BETWEEN 6 and 1;
SELECT id FROM t2 WHERE id BETWEEN 6 and 1 /* no additional predicate */;
SELECT id FROM t2 WHERE id BETWEEN 6 and 1 AND id > -16777216;
SAVEPOINT A;
INSERT INTO t1 ( a, b ) VALUES ( 3 , 5 );
DELETE FROM t1 WHERE id IN ( 1 , 7 , 4 ) LIMIT 7;
INSERT INTO t1 ( a, b ) VALUES ( 7 , 2 );
SELECT b FROM t1 WHERE b BETWEEN 4 and 9;
SELECT b FROM t1 WHERE b BETWEEN 4 and 9 /* no additional predicate */;
SELECT b FROM t1 WHERE b BETWEEN 4 and 9 AND id > -16777216;
SELECT b FROM t2 WHERE 1 = 1;
SELECT b FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT b FROM t2 WHERE 1 = 1 AND id > -16777216;
SELECT b FROM t2 WHERE id IN ( 2 , 7 , 8 );
SELECT b FROM t2 WHERE id IN ( 2 , 7 , 8 ) /* no additional predicate */;
SELECT b FROM t2 WHERE id IN ( 2 , 7 , 8 ) AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 9 , 2 );
UPDATE t1 SET id = 9 WHERE a BETWEEN 6 and 2 LIMIT 0;
DELETE FROM t1 WHERE id < 6 LIMIT 8;
ROLLBACK;
DELETE FROM t1 WHERE id BETWEEN 3 and 5 LIMIT 9;
UPDATE t1 SET b = 1 WHERE b BETWEEN 3 and 4 LIMIT 1;
ROLLBACK TO SAVEPOINT A;
INSERT INTO t2 ( a, b ) VALUES ( 8 , 3 );
DELETE FROM t1 WHERE b < 2 LIMIT 9;
DELETE FROM t2 WHERE 1 = 1 LIMIT 7;
UPDATE t1 SET a = 3 WHERE id < 2 LIMIT 1;
DELETE FROM t2 WHERE 1 = 1 LIMIT 2;
UPDATE t1 SET a = 1 WHERE b > 0 LIMIT 1;
SELECT a FROM t1 WHERE b = 8;
UPDATE t2 SET id = 1 WHERE id = 8 LIMIT 4;
INSERT INTO t1 ( a, b ) VALUES ( 5 , 8 );
SELECT a FROM t1 WHERE b = 8 /* no additional predicate */;
SELECT a FROM t1 WHERE b = 8 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 4 , 3 );
ROLLBACK;
UPDATE t1 SET b = 8 WHERE b < 3 LIMIT 6;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 6 );
SELECT a FROM t2 WHERE 1 = 1;
SELECT id FROM t2 WHERE 1 = 1;
SELECT a FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT id FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT a FROM t2 WHERE 1 = 1 AND id > -16777216;
SELECT id FROM t2 WHERE 1 = 1 AND id > -16777216;
SAVEPOINT A;
DELETE FROM t1 WHERE b = 4 LIMIT 4;
DELETE FROM t1 WHERE b > 8 LIMIT 7;
UPDATE t1 SET b = 9 WHERE a > 1 LIMIT 7;
INSERT INTO t2 ( a, b ) VALUES ( 2 , 4 );
INSERT INTO t2 ( a, b ) VALUES ( 1 , 9 );
INSERT INTO t1 ( a, b ) VALUES ( 1 , 8 );
--error 1062
UPDATE t1 SET id = 0 WHERE 1 = 1 LIMIT 6;
UPDATE t2 SET a = 4 WHERE a IN ( 0 , 6 , 5 ) LIMIT 5;
INSERT INTO t1 ( a, b ) VALUES ( 6 , 9 );
INSERT INTO t2 ( a, b ) VALUES ( 4 , 8 );
INSERT INTO t2 ( a, b ) VALUES ( 2 , 6 );
SELECT b FROM t2 WHERE b > 8;
INSERT INTO t1 ( a, b ) VALUES ( 0 , 8 );
SAVEPOINT A;
SELECT b FROM t2 WHERE b > 8 /* no additional predicate */;
UPDATE t2 SET a = 0 WHERE a BETWEEN 1 and 0 LIMIT 2;
ROLLBACK TO SAVEPOINT A;
SELECT b FROM t2 WHERE b > 8 AND id > -16777216;
DELETE FROM t2 WHERE b IN ( 2 , 9 , 2 ) LIMIT 0;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 0 );
SAVEPOINT A;
UPDATE t1 SET a = 9 WHERE id > 1 LIMIT 6;
DELETE FROM t1 WHERE id > 1 LIMIT 6;
SELECT b FROM t2 WHERE 1 = 1;
DELETE FROM t1 WHERE a < 2 LIMIT 0;
SELECT b FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT b FROM t2 WHERE 1 = 1 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 1 );
START TRANSACTION;
DELETE FROM t2 WHERE a IN ( 3 , 7 , 0 ) LIMIT 7;
DELETE FROM t1 WHERE b IN ( 0 , 7 , 0 ) LIMIT 1;
DELETE FROM t2 WHERE a IN ( 5 , 7 , 7 ) LIMIT 4;
ROLLBACK TO SAVEPOINT A;
DELETE FROM t1 WHERE b < 2 LIMIT 8;
DELETE FROM t2 WHERE a = 2 LIMIT 3;
SAVEPOINT A;
UPDATE t2 SET b = 1 WHERE id IN ( 3 , 4 , 8 ) LIMIT 4;
ROLLBACK TO SAVEPOINT A;
START TRANSACTION;
INSERT INTO t1 ( a, b ) VALUES ( 4 , 5 );
SELECT b FROM t2 WHERE id = 8;
SELECT b FROM t2 WHERE id = 8 /* no additional predicate */;
UPDATE t2 SET a = 7 WHERE b IN ( 6 , 3 , 0 ) LIMIT 7;
SELECT b FROM t2 WHERE id = 8 AND id > -16777216;
DELETE FROM t2 WHERE b = 5 LIMIT 3;
DELETE FROM t1 WHERE 1 = 1 LIMIT 6;
INSERT INTO t1 ( a, b ) VALUES ( 4 , 4 );
UPDATE t2 SET id = 8 WHERE b IN ( 3 , 6 , 7 ) LIMIT 3;
SELECT b FROM t2 WHERE a > 6;
START TRANSACTION;
UPDATE t2 SET b = 5 WHERE b IN ( 1 , 4 , 5 ) LIMIT 4;
COMMIT;
START TRANSACTION;
INSERT INTO t1 ( a, b ) VALUES ( 8 , 6 );
DELETE FROM t1 WHERE a > 5 LIMIT 5;
SELECT b FROM t1 WHERE id = 0;
DELETE FROM t2 WHERE b > 9 LIMIT 1;
ROLLBACK TO SAVEPOINT A;
SELECT b FROM t1 WHERE id = 0 /* no additional predicate */;
SELECT b FROM t2 WHERE a > 6 /* no additional predicate */;
INSERT INTO t2 ( a, b ) VALUES ( 9 , 6 );
INSERT INTO t2 ( a, b ) VALUES ( 4 , 4 );
SELECT b FROM t1 WHERE id = 0 AND id > -16777216;
ROLLBACK TO SAVEPOINT A;
START TRANSACTION;
INSERT INTO t1 ( a, b ) VALUES ( 4 , 7 );
SELECT b FROM t2 WHERE a > 6 AND id > -16777216;
UPDATE t2 SET a = 0 WHERE id BETWEEN 7 and 2 LIMIT 0;
UPDATE t2 SET id = 3 WHERE b IN ( 0 , 2 , 6 ) LIMIT 6;
DELETE FROM t2 WHERE id IN ( 2 , 1 , 6 ) LIMIT 4;
DELETE FROM t1 WHERE id IN ( 0 , 1 , 7 ) LIMIT 8;
SELECT a FROM t1 WHERE b IN ( 0 , 0 , 3 );
INSERT INTO t1 ( a, b ) VALUES ( 4 , 8 );
SAVEPOINT A;
INSERT INTO t2 ( a, b ) VALUES ( 7 , 1 );
SELECT a FROM t1 WHERE b IN ( 0 , 0 , 3 ) /* no additional predicate */;
ROLLBACK;
SELECT id FROM t2 WHERE b < 0;
SELECT a FROM t1 WHERE b IN ( 0 , 0 , 3 ) AND id > -16777216;
SELECT b FROM t1 WHERE id > 6;
DELETE FROM t1 WHERE 1 = 1 LIMIT 0;
SELECT id FROM t2 WHERE b < 0 /* no additional predicate */;
SELECT b FROM t1 WHERE id > 6 /* no additional predicate */;
SELECT id FROM t2 WHERE b < 0 AND id > -16777216;
SELECT b FROM t1 WHERE id > 6 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 4 );
UPDATE t2 SET a = 7 WHERE id IN ( 4 , 3 , 0 ) LIMIT 8;
INSERT INTO t2 ( a, b ) VALUES ( 8 , 8 );
UPDATE t1 SET a = 9 WHERE b > 0 LIMIT 2;
UPDATE t2 SET b = 8 WHERE a > 5 LIMIT 8;
UPDATE t2 SET id = 4 WHERE a BETWEEN 6 and 4 LIMIT 7;
ROLLBACK;
ROLLBACK;
DELETE FROM t2 WHERE a = 3 LIMIT 3;
UPDATE t1 SET id = 4 WHERE id = 3 LIMIT 4;
DELETE FROM t1 WHERE a > 9 LIMIT 8;
DELETE FROM t2 WHERE b IN ( 5 , 7 , 6 ) LIMIT 7;
INSERT INTO t1 ( a, b ) VALUES ( 8 , 5 );
INSERT INTO t1 ( a, b ) VALUES ( 7 , 6 );
INSERT INTO t1 ( a, b ) VALUES ( 5 , 8 );
SELECT b FROM t2 WHERE id > 2;
DELETE FROM t1 WHERE a IN ( 5 , 3 , 1 ) LIMIT 2;
SELECT b FROM t2 WHERE id > 2 /* no additional predicate */;
UPDATE t1 SET a = 2 WHERE 1 = 1 LIMIT 5;
DELETE FROM t1 WHERE id < 6 LIMIT 5;
SELECT b FROM t2 WHERE id > 2 AND id > -16777216;
DELETE FROM t2 WHERE a < 8 LIMIT 6;
DELETE FROM t2 WHERE a > 5 LIMIT 6;
UPDATE t2 SET b = 6 WHERE b < 4 LIMIT 0;
ROLLBACK TO SAVEPOINT A;
START TRANSACTION;
SAVEPOINT A;
UPDATE t1 SET a = 4 WHERE b > 4 LIMIT 9;
UPDATE t2 SET id = 0 WHERE a BETWEEN 7 and 7 LIMIT 8;
UPDATE t2 SET b = 5 WHERE id = 7 LIMIT 5;
INSERT INTO t1 ( a, b ) VALUES ( 4 , 1 );
UPDATE t1 SET b = 6 WHERE id BETWEEN 0 and 2 LIMIT 4;
DELETE FROM t1 WHERE a IN ( 9 , 0 , 1 ) LIMIT 6;
DELETE FROM t2 WHERE id IN ( 4 , 5 , 0 ) LIMIT 5;
SELECT id FROM t1 WHERE a = 7;
ROLLBACK;
COMMIT;
SELECT id FROM t1 WHERE a = 7 /* no additional predicate */;
SELECT id FROM t1 WHERE a = 7 AND id > -16777216;
UPDATE t2 SET id = 1 WHERE 1 = 1 LIMIT 5;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 6 );
DELETE FROM t1 WHERE a = 8 LIMIT 8;
SELECT id FROM t2 WHERE b BETWEEN 3 and 2;
SELECT id FROM t2 WHERE b BETWEEN 3 and 2 /* no additional predicate */;
SELECT id FROM t2 WHERE b BETWEEN 3 and 2 AND id > -16777216;
UPDATE t2 SET b = 9 WHERE a BETWEEN 2 and 6 LIMIT 3;
UPDATE t2 SET b = 2 WHERE a = 8 LIMIT 4;
UPDATE t1 SET a = 5 WHERE b IN ( 0 , 7 , 8 ) LIMIT 8;
ROLLBACK TO SAVEPOINT A;
INSERT INTO t2 ( a, b ) VALUES ( 4 , 5 );
ROLLBACK TO SAVEPOINT A;
UPDATE t2 SET b = 6 WHERE a IN ( 0 , 8 , 0 ) LIMIT 5;
UPDATE t1 SET id = 8 WHERE id < 2 LIMIT 9;
UPDATE t1 SET a = 1 WHERE b > 2 LIMIT 8;
DELETE FROM t2 WHERE a IN ( 9 , 7 , 6 ) LIMIT 1;
UPDATE t1 SET b = 7 WHERE b > 6 LIMIT 9;
UPDATE t1 SET b = 0 WHERE 1 = 1 LIMIT 0;
ROLLBACK;
SAVEPOINT A;
DELETE FROM t2 WHERE a = 9 LIMIT 1;
SELECT id FROM t1 WHERE a BETWEEN 9 and 7;
SELECT id FROM t1 WHERE a BETWEEN 9 and 7 /* no additional predicate */;
UPDATE t1 SET a = 3 WHERE a = 0 LIMIT 6;
SELECT id FROM t1 WHERE a BETWEEN 9 and 7 AND id > -16777216;
SELECT a FROM t1 WHERE id = 5;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 3 );
SELECT a FROM t1 WHERE id = 5 /* no additional predicate */;
SELECT a FROM t1 WHERE id = 5 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 9 , 3 );
UPDATE t2 SET id = 4 WHERE b = 6 LIMIT 6;
SELECT b FROM t2 WHERE id < 9;
SELECT b FROM t2 WHERE id < 9 /* no additional predicate */;
DELETE FROM t2 WHERE a < 3 LIMIT 7;
SELECT b FROM t2 WHERE id < 9 AND id > -16777216;
ROLLBACK TO SAVEPOINT A;
ROLLBACK TO SAVEPOINT A;
DELETE FROM t2 WHERE id > 5 LIMIT 7;
UPDATE t1 SET id = 6 WHERE id = 6 LIMIT 3;
ROLLBACK;
INSERT INTO t2 ( a, b ) VALUES ( 6 , 5 );
INSERT INTO t1 ( a, b ) VALUES ( 7 , 8 );
INSERT INTO t2 ( a, b ) VALUES ( 5 , 9 );
INSERT INTO t2 ( a, b ) VALUES ( 4 , 0 );
INSERT INTO t1 ( a, b ) VALUES ( 0 , 8 );
INSERT INTO t1 ( a, b ) VALUES ( 9 , 0 );
UPDATE t2 SET id = 9 WHERE b BETWEEN 9 and 7 LIMIT 7;
SELECT id FROM t1 WHERE b = 0;
SELECT id FROM t1 WHERE b = 0 /* no additional predicate */;
DELETE FROM t1 WHERE 1 = 1 LIMIT 7;
DELETE FROM t1 WHERE b < 5 LIMIT 4;
SELECT id FROM t1 WHERE b = 0 AND id > -16777216;
DELETE FROM t2 WHERE id BETWEEN 8 and 5 LIMIT 6;
UPDATE t2 SET b = 1 WHERE a = 6 LIMIT 0;
ROLLBACK;
SELECT a FROM t1 WHERE b IN ( 6 , 0 , 5 );
SELECT a FROM t2 WHERE a IN ( 1 , 6 , 4 );
SELECT a FROM t1 WHERE b IN ( 6 , 0 , 5 ) /* no additional predicate */;
SELECT a FROM t2 WHERE a IN ( 1 , 6 , 4 ) /* no additional predicate */;
SELECT a FROM t1 WHERE b IN ( 6 , 0 , 5 ) AND id > -16777216;
SELECT a FROM t2 WHERE a IN ( 1 , 6 , 4 ) AND id > -16777216;
UPDATE t1 SET id = 5 WHERE a IN ( 1 , 0 , 9 ) LIMIT 8;
INSERT INTO t2 ( a, b ) VALUES ( 3 , 0 );
DELETE FROM t2 WHERE b BETWEEN 0 and 0 LIMIT 0;
INSERT INTO t2 ( a, b ) VALUES ( 5 , 5 );
SELECT b FROM t1 WHERE a = 6;
DELETE FROM t2 WHERE a = 6 LIMIT 1;
SELECT b FROM t1 WHERE a = 6 /* no additional predicate */;
SELECT b FROM t1 WHERE a = 6 AND id > -16777216;
UPDATE t2 SET a = 8 WHERE id > 5 LIMIT 5;
DELETE FROM t1 WHERE 1 = 1 LIMIT 6;
SELECT b FROM t2 WHERE id = 8;
SELECT b FROM t2 WHERE id = 8 /* no additional predicate */;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 2 );
SELECT b FROM t2 WHERE id = 8 AND id > -16777216;
DELETE FROM t1 WHERE id > 4 LIMIT 9;
ROLLBACK TO SAVEPOINT A;
SELECT b FROM t1 WHERE a > 0;
SELECT b FROM t1 WHERE a > 0 /* no additional predicate */;
SELECT b FROM t1 WHERE a > 0 AND id > -16777216;
SELECT a FROM t1 WHERE b > 8;
SELECT a FROM t1 WHERE b > 8 /* no additional predicate */;
COMMIT;
COMMIT;
SELECT a FROM t1 WHERE b > 8 AND id > -16777216;
SELECT b FROM t2 WHERE b > 1;
SELECT b FROM t2 WHERE b > 1 /* no additional predicate */;
DELETE FROM t2 WHERE b BETWEEN 3 and 3 LIMIT 9;
DELETE FROM t1 WHERE b < 9 LIMIT 1;
DELETE FROM t1 WHERE b IN ( 5 , 4 , 9 ) LIMIT 2;
SELECT b FROM t2 WHERE b > 1 AND id > -16777216;
DELETE FROM t1 WHERE a < 1 LIMIT 4;
UPDATE t2 SET id = 8 WHERE id IN ( 5 , 3 , 2 ) LIMIT 7;
UPDATE t2 SET a = 0 WHERE b BETWEEN 7 and 2 LIMIT 9;
INSERT INTO t2 ( a, b ) VALUES ( 5 , 7 );
SELECT id FROM t1 WHERE a > 9;
DELETE FROM t2 WHERE b > 7 LIMIT 6;
SELECT id FROM t1 WHERE a > 9 /* no additional predicate */;
DELETE FROM t2 WHERE b IN ( 0 , 7 , 5 ) LIMIT 6;
SELECT a FROM t1 WHERE b < 9;
SELECT id FROM t1 WHERE a > 9 AND id > -16777216;
ROLLBACK;
SELECT a FROM t1 WHERE b < 9 /* no additional predicate */;
SELECT a FROM t1 WHERE b < 9 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 1 );
DELETE FROM t2 WHERE id > 0 LIMIT 7;
SELECT a FROM t1 WHERE a < 4;
SELECT a FROM t1 WHERE a < 4 /* no additional predicate */;
SELECT a FROM t1 WHERE a < 4 AND id > -16777216;
SAVEPOINT A;
DELETE FROM t1 WHERE a = 3 LIMIT 2;
ROLLBACK;
UPDATE t1 SET id = 7 WHERE a > 8 LIMIT 1;
UPDATE t2 SET id = 8 WHERE id < 6 LIMIT 9;
ROLLBACK;
INSERT INTO t2 ( a, b ) VALUES ( 0 , 7 );
UPDATE t2 SET b = 7 WHERE a IN ( 9 , 7 , 5 ) LIMIT 8;
SELECT id FROM t1 WHERE b BETWEEN 3 and 7;
SELECT id FROM t1 WHERE b BETWEEN 3 and 7 /* no additional predicate */;
SELECT id FROM t1 WHERE b BETWEEN 3 and 7 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 4 , 4 );
SELECT a FROM t2 WHERE 1 = 1;
SELECT a FROM t2 WHERE 1 = 1 /* no additional predicate */;
SELECT a FROM t2 WHERE 1 = 1 AND id > -16777216;
SELECT a FROM t2 WHERE a BETWEEN 0 and 4;
SELECT a FROM t2 WHERE a BETWEEN 0 and 4 /* no additional predicate */;
SELECT a FROM t2 WHERE a BETWEEN 0 and 4 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 1 , 5 );
UPDATE t1 SET b = 0 WHERE id < 7 LIMIT 8;
SELECT b FROM t1 WHERE 1 = 1;
SELECT b FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT b FROM t1 WHERE 1 = 1 AND id > -16777216;
UPDATE t1 SET b = 9 WHERE id = 6 LIMIT 8;
DELETE FROM t1 WHERE b BETWEEN 6 and 1 LIMIT 5;
SELECT a FROM t1 WHERE a < 6;
SELECT a FROM t1 WHERE a < 6 /* no additional predicate */;
SELECT a FROM t1 WHERE a < 6 AND id > -16777216;
UPDATE t1 SET a = 3 WHERE 1 = 1 LIMIT 2;
DELETE FROM t1 WHERE id = 5 LIMIT 7;
SELECT a FROM t2 WHERE a IN ( 1 , 2 , 2 );
SELECT a FROM t2 WHERE a IN ( 1 , 2 , 2 ) /* no additional predicate */;
SELECT a FROM t2 WHERE a IN ( 1 , 2 , 2 ) AND id > -16777216;
UPDATE t1 SET a = 0 WHERE id > 1 LIMIT 6;
SELECT a FROM t2 WHERE b < 2;
SELECT a FROM t2 WHERE b < 2 /* no additional predicate */;
SELECT a FROM t2 WHERE b < 2 AND id > -16777216;
DELETE FROM t1 WHERE a IN ( 2 , 1 , 2 ) LIMIT 2;
SELECT a FROM t1 WHERE id < 0;
SELECT a FROM t1 WHERE id < 0 /* no additional predicate */;
SELECT a FROM t1 WHERE id < 0 AND id > -16777216;
DELETE FROM t1 WHERE a IN ( 0 , 3 , 1 ) LIMIT 0;
--error 1062
UPDATE t2 SET id = 1 WHERE 1 = 1 LIMIT 8;
UPDATE t1 SET b = 5 WHERE a < 6 LIMIT 3;
UPDATE t2 SET a = 6 WHERE b BETWEEN 0 and 6 LIMIT 2;
DELETE FROM t1 WHERE a > 4 LIMIT 3;
ROLLBACK;
SAVEPOINT A;
SELECT id FROM t2 WHERE b < 1;
INSERT INTO t1 ( a, b ) VALUES ( 1 , 2 );
SELECT id FROM t2 WHERE b < 1 /* no additional predicate */;
SELECT id FROM t2 WHERE b < 1 AND id > -16777216;
SELECT id FROM t2 WHERE b BETWEEN 4 and 7;
SELECT b FROM t1 WHERE id > 8;
SELECT a FROM t1 WHERE 1 = 1;
SELECT id FROM t2 WHERE b BETWEEN 4 and 7 /* no additional predicate */;
SELECT b FROM t1 WHERE id > 8 /* no additional predicate */;
SELECT a FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT a FROM t1 WHERE 1 = 1 AND id > -16777216;
SELECT id FROM t2 WHERE b BETWEEN 4 and 7 AND id > -16777216;
SELECT b FROM t1 WHERE id > 8 AND id > -16777216;
INSERT INTO t1 ( a, b ) VALUES ( 3 , 7 );
SELECT id FROM t1 WHERE id BETWEEN 8 and 1;
SELECT a FROM t1 WHERE 1 = 1;
SELECT id FROM t1 WHERE id BETWEEN 8 and 1 /* no additional predicate */;
SELECT a FROM t1 WHERE 1 = 1 /* no additional predicate */;
SELECT id FROM t1 WHERE id BETWEEN 8 and 1 AND id > -16777216;
SELECT a FROM t1 WHERE 1 = 1 AND id > -16777216;
INSERT INTO t2 ( a, b ) VALUES ( 8 , 6 );
SELECT b FROM t1 WHERE b IN ( 8 , 3 , 9 );
SELECT a FROM t2 WHERE a > 2;
SELECT b FROM t1 WHERE b IN ( 8 , 3 , 9 ) /* no additional predicate */;
SELECT b FROM t1 WHERE b IN ( 8 , 3 , 9 ) AND id > -16777216;
SELECT a FROM t2 WHERE a > 2 /* no additional predicate */;
DELETE FROM t2 WHERE id > 6 LIMIT 3;
SELECT a FROM t2 WHERE a > 2 AND id > -16777216;
UPDATE t1 SET b = 2 WHERE 1 = 1 LIMIT 7;
DELETE FROM t2 WHERE a < 2 LIMIT 3;
ROLLBACK;
UPDATE t1 SET b = 1 WHERE a BETWEEN 1 and 3 LIMIT 1;
COMMIT;
ROLLBACK TO SAVEPOINT A;
UPDATE t1 SET b = 0 WHERE a = 7 LIMIT 2;
DELETE FROM t2 WHERE a < 7 LIMIT 1;
DELETE FROM t2 WHERE a IN ( 3 , 9 , 0 ) LIMIT 2;
UPDATE t2 SET b = 7 WHERE 1 = 1 LIMIT 3;
INSERT INTO t2 ( a, b ) VALUES ( 3 , 6 );
INSERT INTO t2 ( a, b ) VALUES ( 3 , 7 );
SELECT id FROM t1 WHERE b BETWEEN 3 and 9;
INSERT INTO t2 ( a, b ) VALUES ( 9 , 6 );
SELECT id FROM t1 WHERE b BETWEEN 3 and 9 /* no additional predicate */;
SELECT id FROM t1 WHERE b BETWEEN 3 and 9 AND id > -16777216;
DELETE FROM t1 WHERE 1 = 1 LIMIT 8;
UPDATE t1 SET b = 6 WHERE a < 4 LIMIT 3;
ROLLBACK TO SAVEPOINT A;
DROP TABLE t1, t2;
--echo End Test of Bug 542299
