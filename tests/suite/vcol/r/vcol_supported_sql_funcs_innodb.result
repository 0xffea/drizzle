DROP TABLE IF EXISTS t1,t2,t3;
set sql_warnings = 0;
SET @@session.storage_engine = 'InnoDB';
#
# NUMERIC FUNCTIONS
#
# ABS()
set sql_warnings = 1;
create table t1 (a int, b virtual int as (abs(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL int AS (abs(a))
) ENGINE=InnoDB
insert into t1 values (-1, default);
select * from t1;
a	b
-1	1
drop table t1;
set sql_warnings = 0;
# ACOS()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (acos(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (acos(a))
) ENGINE=InnoDB
insert into t1 values (1, default);
insert into t1 values (1.0001,default);
insert into t1 values (0,default);
select * from t1;
a	b
1	0
1.0001	NULL
0	1.5707963267948966
drop table t1;
set sql_warnings = 0;
# ASIN()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (asin(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (asin(a))
) ENGINE=InnoDB
insert into t1 values (0.2, default);
insert into t1 values (1.0001,default);
select * from t1;
a	b
0.2	0.20135792079033082
1.0001	NULL
drop table t1;
set sql_warnings = 0;
#ATAN
set sql_warnings = 1;
create table t1 (a double, b double, c virtual double as (atan(a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` double,
  `c` VIRTUAL double AS (atan(a,b))
) ENGINE=InnoDB
insert into t1 values (-2,2,default);
insert into t1 values (PI(),0,default);
select * from t1;
a	b	c
-2	2	-0.7853981633974483
3.141592653589793	0	1.5707963267948966
drop table t1;
set sql_warnings = 0;
set sql_warnings = 1;
create table t1 (a double, c virtual double as (atan(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `c` VIRTUAL double AS (atan(a))
) ENGINE=InnoDB
insert into t1 values (-2,default);
insert into t1 values (PI(),default);
select * from t1;
a	c
-2	-1.1071487177940904
3.141592653589793	1.2626272556789118
drop table t1;
set sql_warnings = 0;
# ATAN2
set sql_warnings = 1;
create table t1 (a double, b double, c virtual double as (atan2(a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` double,
  `c` VIRTUAL double AS (atan2(a,b))
) ENGINE=InnoDB
insert into t1 values (-2,2,default);
insert into t1 values (PI(),0,default);
select * from t1;
a	b	c
-2	2	-0.7853981633974483
3.141592653589793	0	1.5707963267948966
drop table t1;
set sql_warnings = 0;
# CEIL()
set sql_warnings = 1;
create table t1 (a double, b virtual int as (ceil(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL int AS (ceil(a))
) ENGINE=InnoDB
insert into t1 values (1.23,default);
insert into t1 values (-1.23,default);
select * from t1;
a	b
1.23	2
-1.23	-1
drop table t1;
set sql_warnings = 0;
# CONV()
set sql_warnings = 1;
create table t1 (a varchar(10), b int, c int, d virtual varchar(10) as (conv(a,b,c)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` int,
  `c` int,
  `d` VIRTUAL varchar(10) AS (conv(a,b,c))
) ENGINE=InnoDB
insert into t1 values ('a',16,2,default);
insert into t1 values ('6e',18,8,default);
insert into t1 values (-17,10,-18,default);
insert into t1 values (10+'10'+'10'+0xa,10,10,default);
select * from t1;
a	b	c	d
a	16	2	1010
6e	18	8	172
-17	10	-18	-H
40	10	10	40
drop table t1;
set sql_warnings = 0;
# COS()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (cos(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (cos(a))
) ENGINE=InnoDB
insert into t1 values (PI(),default);
select * from t1;
a	b
3.141592653589793	-1
drop table t1;
set sql_warnings = 0;
# COT()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (cot(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (cot(a))
) ENGINE=InnoDB
insert into t1 values (12,default);
insert into t1 values (0,default);
Warnings:
Error	1365	Division by 0
select * from t1;
a	b
12	-1.5726734063976893
0	NULL
Warnings:
Error	1365	Division by 0
drop table t1;
set sql_warnings = 0;
# DEGREES()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (degrees(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (degrees(a))
) ENGINE=InnoDB
insert into t1 values (PI(),default);
insert into t1 values (PI()/2,default);
select * from t1;
a	b
3.141592653589793	180
1.5707963267948966	90
drop table t1;
set sql_warnings = 0;
# /
set sql_warnings = 1;
create table t1 (a double, b virtual double as (a/2));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (a/2)
) ENGINE=InnoDB
insert into t1 values (2,default);
select * from t1;
a	b
2	1
drop table t1;
set sql_warnings = 0;
# EXP()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (exp(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (exp(a))
) ENGINE=InnoDB
insert into t1 values (2,default);
insert into t1 values (-2,default);
insert into t1 values (0,default);
select * from t1;
a	b
2	7.38905609893065
-2	0.1353352832366127
0	1
drop table t1;
set sql_warnings = 0;
# FLOOR()
set sql_warnings = 1;
create table t1 (a double, b virtual int as (floor(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL int AS (floor(a))
) ENGINE=InnoDB
insert into t1 values (1.23,default);
insert into t1 values (-1.23,default);
select * from t1;
a	b
1.23	1
-1.23	-2
drop table t1;
set sql_warnings = 0;
# LN()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (ln(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (ln(a))
) ENGINE=InnoDB
insert into t1 values (2,default);
insert into t1 values (-2,default);
Warnings:
Error	1365	Division by 0
select * from t1;
a	b
2	0.6931471805599453
-2	NULL
Warnings:
Error	1365	Division by 0
drop table t1;
set sql_warnings = 0;
# LOG()
set sql_warnings = 1;
create table t1 (a double, b double, c virtual double as (log(a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` double,
  `c` VIRTUAL double AS (log(a,b))
) ENGINE=InnoDB
insert into t1 values (2,65536,default);
insert into t1 values (10,100,default);
insert into t1 values (1,100,default);
Warnings:
Error	1365	Division by 0
select * from t1;
a	b	c
2	65536	16
10	100	2
1	100	NULL
Warnings:
Error	1365	Division by 0
drop table t1;
set sql_warnings = 0;
set sql_warnings = 1;
create table t1 (a double, b virtual double as (log(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (log(a))
) ENGINE=InnoDB
insert into t1 values (2,default);
insert into t1 values (-2,default);
Warnings:
Error	1365	Division by 0
select * from t1;
a	b
2	0.6931471805599453
-2	NULL
Warnings:
Error	1365	Division by 0
drop table t1;
set sql_warnings = 0;
# LOG2()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (log2(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (log2(a))
) ENGINE=InnoDB
insert into t1 values (65536,default);
insert into t1 values (-100,default);
Warnings:
Error	1365	Division by 0
select * from t1;
a	b
65536	16
-100	NULL
Warnings:
Error	1365	Division by 0
drop table t1;
set sql_warnings = 0;
# LOG10()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (log10(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (log10(a))
) ENGINE=InnoDB
insert into t1 values (2,default);
insert into t1 values (100,default);
insert into t1 values (-100,default);
Warnings:
Error	1365	Division by 0
select * from t1;
a	b
2	0.3010299956639812
100	2
-100	NULL
Warnings:
Error	1365	Division by 0
drop table t1;
set sql_warnings = 0;
# -
set sql_warnings = 1;
create table t1 (a double, b virtual double as (a-1));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (a-1)
) ENGINE=InnoDB
insert into t1 values (2,default);
select * from t1;
a	b
2	1
drop table t1;
set sql_warnings = 0;
# MOD()
set sql_warnings = 1;
create table t1 (a double, b virtual int as (mod(a,10)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL int AS (mod(a,10))
) ENGINE=InnoDB
insert into t1 values (1,default);
insert into t1 values (11,default);
select * from t1;
a	b
1	1
11	1
drop table t1;
set sql_warnings = 0;
# %
set sql_warnings = 1;
create table t1 (a double, b virtual int as (a % 10));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL int AS (a % 10)
) ENGINE=InnoDB
insert into t1 values (1,default);
insert into t1 values (11,default);
select * from t1;
a	b
1	1
11	1
drop table t1;
set sql_warnings = 0;
# OCT()
set sql_warnings = 1;
create table t1 (a double, b virtual varchar(10) as (oct(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL varchar(10) AS (oct(a))
) ENGINE=InnoDB
insert into t1 values (12,default);
select * from t1;
a	b
12	14
drop table t1;
set sql_warnings = 0;
# PI()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (PI()*a*a));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (PI()*a*a)
) ENGINE=InnoDB
insert into t1 values (1,default);
select * from t1;
a	b
1	3.141592653589793
drop table t1;
set sql_warnings = 0;
# +
set sql_warnings = 1;
create table t1 (a int, b virtual int as (a+1));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL int AS (a+1)
) ENGINE=InnoDB
insert into t1 values (1,default);
select * from t1;
a	b
1	2
drop table t1;
set sql_warnings = 0;
# POW, POWER
set sql_warnings = 1;
create table t1 (a int, b virtual int as (pow(a,2)), c virtual int as (power(a,2)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL int AS (pow(a,2)),
  `c` VIRTUAL int AS (power(a,2))
) ENGINE=InnoDB
insert into t1 values (1,default,default);
insert into t1 values (2,default,default);
select * from t1;
a	b	c
1	1	1
2	4	4
drop table t1;
set sql_warnings = 0;
# RADIANS()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (radians(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (radians(a))
) ENGINE=InnoDB
insert into t1 values (90,default);
select * from t1;
a	b
90	1.5707963267948966
drop table t1;
set sql_warnings = 0;
# ROUND()
set sql_warnings = 1;
create table t1 (a double, b virtual int as (round(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL int AS (round(a))
) ENGINE=InnoDB
insert into t1 values (-1.23,default);
insert into t1 values (-1.58,default);
insert into t1 values (1.58,default);
select * from t1;
a	b
-1.23	-1
-1.58	-2
1.58	2
drop table t1;
set sql_warnings = 0;
set sql_warnings = 1;
create table t1 (a double, b double, c virtual int as (round(a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` double,
  `c` VIRTUAL int AS (round(a,b))
) ENGINE=InnoDB
insert into t1 values (1.298,1,default);
insert into t1 values (1.298,0,default);
insert into t1 values (23.298,-1,default);
select * from t1;
a	b	c
1.298	1	1
1.298	0	1
23.298	-1	20
drop table t1;
set sql_warnings = 0;
# SIGN()
set sql_warnings = 1;
create table t1 (a double, b virtual int as (sign(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL int AS (sign(a))
) ENGINE=InnoDB
insert into t1 values (-32,default);
insert into t1 values (0,default);
insert into t1 values (234,default);
select * from t1;
a	b
-32	-1
0	0
234	1
drop table t1;
set sql_warnings = 0;
# SIN()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (sin(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (sin(a))
) ENGINE=InnoDB
insert into t1 values (PI(),default);
Warnings:
Warning	1292	Incorrect datetime value: '3.141592653589793'
select * from t1;
a	b
3.141592653589793	NULL
Warnings:
Warning	1292	Incorrect datetime value: '3.141592653589793'
drop table t1;
set sql_warnings = 0;
# SQRT()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (sqrt(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (sqrt(a))
) ENGINE=InnoDB
insert into t1 values (4,default);
insert into t1 values (20,default);
insert into t1 values (-16,default);
select * from t1;
a	b
4	2
20	4.47213595499958
-16	NULL
drop table t1;
set sql_warnings = 0;
# TAN()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (tan(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (tan(a))
) ENGINE=InnoDB
insert into t1 values (PI(),default);
insert into t1 values (PI()+1,default);
select * from t1;
a	b
3.141592653589793	-1.2246063538223773e-16
4.141592653589793	1.5574077246549018
drop table t1;
set sql_warnings = 0;
# *
set sql_warnings = 1;
create table t1 (a double, b virtual double as (a*3));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (a*3)
) ENGINE=InnoDB
insert into t1 values (0,default);
insert into t1 values (1,default);
insert into t1 values (2,default);
select * from t1;
a	b
0	0
1	3
2	6
drop table t1;
set sql_warnings = 0;
# TRUNCATE()
set sql_warnings = 1;
create table t1 (a double, b virtual double as (truncate(a,4)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (truncate(a,4))
) ENGINE=InnoDB
insert into t1 values (1.223,default);
insert into t1 values (1.999,default);
insert into t1 values (1.999,default);
insert into t1 values (122,default);
select * from t1;
a	b
1.223	1.223
1.999	1.999
1.999	1.999
122	122
drop table t1;
set sql_warnings = 0;
# Unary -
set sql_warnings = 1;
create table t1 (a double, b virtual double as (-a));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL double AS (-a)
) ENGINE=InnoDB
insert into t1 values (1,default);
insert into t1 values (-1,default);
select * from t1;
a	b
1	-1
-1	1
drop table t1;
set sql_warnings = 0;
#
# STRING FUNCTIONS
#
# ASCII()
set sql_warnings = 1;
create table t1 (a char(2), b virtual int as (ascii(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(2),
  `b` VIRTUAL int AS (ascii(a))
) ENGINE=InnoDB
insert into t1 values ('2',default);
insert into t1 values (2,default);
insert into t1 values ('dx',default);
select * from t1;
a	b
2	50
2	50
dx	100
drop table t1;
set sql_warnings = 0;
# BIN()
set sql_warnings = 1;
create table t1 (a int, b virtual varchar(10) as (bin(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL varchar(10) AS (bin(a))
) ENGINE=InnoDB
insert into t1 values (12,default);
select * from t1;
a	b
12	1100
drop table t1;
set sql_warnings = 0;
# BIT_LENGTH()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual int as (bit_length(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL int AS (bit_length(a))
) ENGINE=InnoDB
insert into t1 values ('text',default);
select * from t1;
a	b
text	32
drop table t1;
set sql_warnings = 0;
# CHAR_LENGTH()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual int as (char_length(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL int AS (char_length(a))
) ENGINE=InnoDB
insert into t1 values ('text',default);
select * from t1;
a	b
text	4
drop table t1;
set sql_warnings = 0;
# CHAR()
set sql_warnings = 1;
create table t1 (a int, b int, c virtual varbinary(10) as (char(a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` int,
  `c` VIRTUAL varbinary(10) AS (char(a,b))
) ENGINE=InnoDB
insert into t1 values (77,121,default);
select * from t1;
a	b	c
77	121	My
drop table t1;
set sql_warnings = 0;
# CHARACTER_LENGTH()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual int as (character_length(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL int AS (character_length(a))
) ENGINE=InnoDB
insert into t1 values ('text',default);
select * from t1;
a	b
text	4
drop table t1;
set sql_warnings = 0;
# CONCAT_WS()
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual varchar(20) as (concat_ws(',',a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL varchar(20) AS (concat_ws(',',a,b))
) ENGINE=InnoDB
insert into t1 values ('value1','value2',default);
select * from t1;
a	b	c
value1	value2	value1,value2
drop table t1;
set sql_warnings = 0;
# CONCAT()
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual varchar(20) as (concat(a,',',b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL varchar(20) AS (concat(a,',',b))
) ENGINE=InnoDB
insert into t1 values ('value1','value2',default);
select * from t1;
a	b	c
value1	value2	value1,value2
drop table t1;
set sql_warnings = 0;
# ELT()
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c int, d virtual varchar(10) as (elt(c,a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` int,
  `d` VIRTUAL varchar(10) AS (elt(c,a,b))
) ENGINE=InnoDB
insert into t1 values ('value1','value2',1,default);
insert into t1 values ('value1','value2',2,default);
select * from t1;
a	b	c	d
value1	value2	1	value1
value1	value2	2	value2
drop table t1;
set sql_warnings = 0;
# EXPORT_SET()
set sql_warnings = 1;
create table t1 (a int, b virtual varchar(10) as (export_set(a,'1','0','',10)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL varchar(10) AS (export_set(a,'1','0','',10))
) ENGINE=InnoDB
insert into t1 values (6,default);
select * from t1;
a	b
6	0110000000
drop table t1;
set sql_warnings = 0;
# FIELD()
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual int as (field('aa',a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL int AS (field('aa',a,b))
) ENGINE=InnoDB
insert into t1 values ('aa','bb',default);
insert into t1 values ('bb','aa',default);
select * from t1;
a	b	c
aa	bb	1
bb	aa	2
drop table t1;
set sql_warnings = 0;
# FIND_IN_SET()
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual int as (find_in_set(a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL int AS (find_in_set(a,b))
) ENGINE=InnoDB
insert into t1 values ('aa','aa,bb,cc',default);
insert into t1 values ('aa','bb,aa,cc',default);
select * from t1;
a	b	c
aa	aa,bb,cc	1
aa	bb,aa,cc	2
drop table t1;
set sql_warnings = 0;
# FORMAT()
set sql_warnings = 1;
create table t1 (a double, b virtual varchar(20) as (format(a,2)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL varchar(20) AS (format(a,2))
) ENGINE=InnoDB
insert into t1 values (12332.123456,default);
select * from t1;
a	b
12332.123456	12,332.12
drop table t1;
set sql_warnings = 0;
# HEX()
set sql_warnings = 1;
create table t1 (a double, b virtual varchar(10) as (hex(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` double,
  `b` VIRTUAL varchar(10) AS (hex(a))
) ENGINE=InnoDB
insert into t1 values (17,default);
select * from t1;
a	b
17	11
drop table t1;
set sql_warnings = 0;
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (hex(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (hex(a))
) ENGINE=InnoDB
insert into t1 values ('abc',default);
select * from t1;
a	b
abc	616263
drop table t1;
set sql_warnings = 0;
# INSERT()
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual varchar(20) as (insert(a,length(a),length(b),b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL varchar(20) AS (insert(a,length(a),length(b),b))
) ENGINE=InnoDB
insert into t1 values ('start,','end',default);
select * from t1;
a	b	c
start,	end	startend
drop table t1;
set sql_warnings = 0;
# INSTR()
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual int as (instr(a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL int AS (instr(a,b))
) ENGINE=InnoDB
insert into t1 values ('foobarbar,','bar',default);
insert into t1 values ('xbar,','foobar',default);
select * from t1;
a	b	c
foobarbar,	bar	4
xbar,	foobar	0
drop table t1;
set sql_warnings = 0;
# LCASE()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (lcase(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (lcase(a))
) ENGINE=InnoDB
insert into t1 values ('MySQL',default);
select * from t1;
a	b
MySQL	mysql
drop table t1;
set sql_warnings = 0;
# LEFT()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(5) as (left(a,5)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(5) AS (left(a,5))
) ENGINE=InnoDB
insert into t1 values ('foobarbar',default);
select * from t1;
a	b
foobarbar	fooba
drop table t1;
set sql_warnings = 0;
# LENGTH()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual int as (length(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL int AS (length(a))
) ENGINE=InnoDB
insert into t1 values ('text',default);
select * from t1;
a	b
text	4
drop table t1;
set sql_warnings = 0;
# LIKE
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual bool as (a like 'H%o'));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL tinyint(1) AS (a like 'H%o')
) ENGINE=InnoDB
insert into t1 values ('Hello',default);
insert into t1 values ('MySQL',default);
select * from t1;
a	b
Hello	1
MySQL	0
drop table t1;
set sql_warnings = 0;
# LOCATE()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (locate('bar',a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (locate('bar',a))
) ENGINE=InnoDB
insert into t1 values ('foobarbar',default);
select * from t1;
a	b
foobarbar	4
drop table t1;
set sql_warnings = 0;
# LOWER()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (lower(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (lower(a))
) ENGINE=InnoDB
insert into t1 values ('MySQL',default);
select * from t1;
a	b
MySQL	mysql
drop table t1;
set sql_warnings = 0;
# LPAD()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (lpad(a,4,' ')));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (lpad(a,4,' '))
) ENGINE=InnoDB
insert into t1 values ('MySQL',default);
insert into t1 values ('M',default);
select * from t1;
a	b
MySQL	MySQ
M	   M
drop table t1;
set sql_warnings = 0;
# LTRIM()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (ltrim(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (ltrim(a))
) ENGINE=InnoDB
insert into t1 values ('  MySQL',default);
insert into t1 values ('MySQL',default);
select * from t1;
a	b
  MySQL	MySQL
MySQL	MySQL
drop table t1;
set sql_warnings = 0;
# MAKE_SET()
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c int, d virtual varchar(30) as (make_set(c,a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` int,
  `d` VIRTUAL varchar(30) AS (make_set(c,a,b))
) ENGINE=InnoDB
insert into t1 values ('a','b',1,default);
insert into t1 values ('a','b',3,default);
select * from t1;
a	b	c	d
a	b	1	a
a	b	3	a,b
drop table t1;
set sql_warnings = 0;
# MID()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (mid(a,1,2)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (mid(a,1,2))
) ENGINE=InnoDB
insert into t1 values ('foobarbar',default);
select * from t1;
a	b
foobarbar	fo
drop table t1;
set sql_warnings = 0;
# NOT LIKE
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual bool as (a not like 'H%o'));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL tinyint(1) AS (a not like 'H%o')
) ENGINE=InnoDB
insert into t1 values ('Hello',default);
insert into t1 values ('MySQL',default);
select * from t1;
a	b
Hello	0
MySQL	1
drop table t1;
set sql_warnings = 0;
# OCTET_LENGTH()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual int as (octet_length(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL int AS (octet_length(a))
) ENGINE=InnoDB
insert into t1 values ('text',default);
select * from t1;
a	b
text	4
drop table t1;
set sql_warnings = 0;
# ORD()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual int as (ord(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL int AS (ord(a))
) ENGINE=InnoDB
insert into t1 values ('2',default);
select * from t1;
a	b
2	50
drop table t1;
set sql_warnings = 0;
# POSITION()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (position('bar' in a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (position('bar' in a))
) ENGINE=InnoDB
insert into t1 values ('foobarbar',default);
select * from t1;
a	b
foobarbar	4
drop table t1;
set sql_warnings = 0;
# QUOTE()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (quote(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (quote(a))
) ENGINE=InnoDB
insert into t1 values ('Don\'t',default);
select * from t1;
a	b
Don't	'Don\'t'
drop table t1;
set sql_warnings = 0;
# REPEAT()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(30) as (repeat(a,3)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(30) AS (repeat(a,3))
) ENGINE=InnoDB
insert into t1 values ('MySQL',default);
select * from t1;
a	b
MySQL	MySQLMySQLMySQL
drop table t1;
set sql_warnings = 0;
# REPLACE()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(30) as (replace(a,'aa','bb')));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(30) AS (replace(a,'aa','bb'))
) ENGINE=InnoDB
insert into t1 values ('maa',default);
select * from t1;
a	b
maa	mbb
drop table t1;
set sql_warnings = 0;
# REVERSE()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(30) as (reverse(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(30) AS (reverse(a))
) ENGINE=InnoDB
insert into t1 values ('maa',default);
select * from t1;
a	b
maa	aam
drop table t1;
set sql_warnings = 0;
# RIGHT()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (right(a,4)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (right(a,4))
) ENGINE=InnoDB
insert into t1 values ('foobarbar',default);
select * from t1;
a	b
foobarbar	rbar
drop table t1;
set sql_warnings = 0;
# RPAD()
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (rpad(a,4,'??')));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (rpad(a,4,'??'))
) ENGINE=InnoDB
insert into t1 values ('He',default);
select * from t1;
a	b
He	He??
drop table t1;
set sql_warnings = 0;
# RTRIM();
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (rtrim(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (rtrim(a))
) ENGINE=InnoDB
insert into t1 values ('Hello  ',default);
select * from t1;
a	b
Hello  	Hello
drop table t1;
set sql_warnings = 0;
# SPACE()
set sql_warnings = 1;
create table t1 (a varchar(5), b virtual varchar(10) as (concat(a,space(5))));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(5),
  `b` VIRTUAL varchar(10) AS (concat(a,space(5)))
) ENGINE=InnoDB
insert into t1 values ('Hello', default);
select * from t1;
a	b
Hello	Hello     
drop table t1;
set sql_warnings = 0;
# STRCMP()
set sql_warnings = 1;
create table t1 (a varchar(9), b varchar(9), c virtual tinyint as (strcmp(a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(9),
  `b` varchar(9),
  `c` VIRTUAL tinyint(4) AS (strcmp(a,b))
) ENGINE=InnoDB
insert into t1 values ('Hello','Hello', default);
insert into t1 values ('Hello','Hello1', default);
select * from t1;
a	b	c
Hello	Hello	0
Hello	Hello1	-1
drop table t1;
set sql_warnings = 0;
# SUBSTR()
set sql_warnings = 1;
create table t1 (a varchar(5), b virtual varchar(10) as (substr(a,2)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(5),
  `b` VIRTUAL varchar(10) AS (substr(a,2))
) ENGINE=InnoDB
insert into t1 values ('Hello',default);
select * from t1;
a	b
Hello	ello
drop table t1;
set sql_warnings = 0;
# SUBSTRING_INDEX()
set sql_warnings = 1;
create table t1 (a varchar(15), b virtual varchar(10) as (substring_index(a,'.',2)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(15),
  `b` VIRTUAL varchar(10) AS (substring_index(a,'.',2))
) ENGINE=InnoDB
insert into t1 values ('www.mysql.com',default);
select * from t1;
a	b
www.mysql.com	www.mysql
drop table t1;
set sql_warnings = 0;
# SUBSTRING()
set sql_warnings = 1;
create table t1 (a varchar(5), b virtual varchar(10) as (substring(a from 2 for 2)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(5),
  `b` VIRTUAL varchar(10) AS (substring(a from 2 for 2))
) ENGINE=InnoDB
insert into t1 values ('Hello',default);
select * from t1;
a	b
Hello	el
drop table t1;
set sql_warnings = 0;
# TRIM()
set sql_warnings = 1;
create table t1 (a varchar(15), b virtual varchar(10) as (trim(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(15),
  `b` VIRTUAL varchar(10) AS (trim(a))
) ENGINE=InnoDB
insert into t1 values (' aa ',default);
select * from t1;
a	b
 aa 	aa
drop table t1;
set sql_warnings = 0;
# UCASE()
set sql_warnings = 1;
create table t1 (a varchar(5), b virtual varchar(10) as (ucase(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(5),
  `b` VIRTUAL varchar(10) AS (ucase(a))
) ENGINE=InnoDB
insert into t1 values ('MySQL',default);
select * from t1;
a	b
MySQL	MYSQL
drop table t1;
set sql_warnings = 0;
# UNHEX()
set sql_warnings = 1;
create table t1 (a varchar(15), b virtual varchar(10) as (unhex(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(15),
  `b` VIRTUAL varchar(10) AS (unhex(a))
) ENGINE=InnoDB
insert into t1 values ('4D7953514C',default);
select * from t1;
a	b
4D7953514C	MySQL
drop table t1;
set sql_warnings = 0;
# UPPER()
set sql_warnings = 1;
create table t1 (a varchar(5), b virtual varchar(10) as (upper(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(5),
  `b` VIRTUAL varchar(10) AS (upper(a))
) ENGINE=InnoDB
insert into t1 values ('MySQL',default);
select * from t1;
a	b
MySQL	MYSQL
drop table t1;
set sql_warnings = 0;
#
# CONTROL FLOW FUNCTIONS
#
# CASE
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(16) as (case a when NULL then 'asd' when 'b' then 'B' else a end));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(16) AS (case a when NULL then 'asd' when 'b' then 'B' else a end)
) ENGINE=InnoDB
insert into t1 values (NULL,default);
insert into t1 values ('b',default);
insert into t1 values ('c',default);
select * from t1;
a	b
NULL	NULL
b	B
c	c
drop table t1;
set sql_warnings = 0;
# IF
set sql_warnings = 1;
create table t1 (a int, b int, c virtual int as (if(a=1,a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` int,
  `c` VIRTUAL int AS (if(a=1,a,b))
) ENGINE=InnoDB
insert into t1 values (1,2,default);
insert into t1 values (3,4,default);
select * from t1;
a	b	c
1	2	1
3	4	4
drop table t1;
set sql_warnings = 0;
# IFNULL
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual varchar(10) as (ifnull(a,'DEFAULT')));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL varchar(10) AS (ifnull(a,'DEFAULT'))
) ENGINE=InnoDB
insert into t1 values (NULL,'adf',default);
insert into t1 values ('a','adf',default);
select * from t1;
a	b	c
NULL	adf	DEFAULT
a	adf	a
drop table t1;
set sql_warnings = 0;
# NULLIF
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varchar(10) as (nullif(a,'DEFAULT')));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varchar(10) AS (nullif(a,'DEFAULT'))
) ENGINE=InnoDB
insert into t1 values ('DEFAULT',default);
insert into t1 values ('a',default);
select * from t1;
a	b
DEFAULT	NULL
a	a
drop table t1;
set sql_warnings = 0;
#
# OPERATORS
#
# AND
set sql_warnings = 1;
create table t1 (a int, b virtual bool as (a>0 and a<2));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL tinyint(1) AS (a>0 and a<2)
) ENGINE=InnoDB
insert into t1 values (-1,default);
insert into t1 values (1,default);
select * from t1;
a	b
-1	0
1	1
drop table t1;
set sql_warnings = 0;
# BETWEEN ... AND ... 
set sql_warnings = 1;
create table t1 (a int, b virtual bool as (a between 0 and 2));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL tinyint(1) AS (a between 0 and 2)
) ENGINE=InnoDB
insert into t1 values (-1,default);
insert into t1 values (1,default);
select * from t1;
a	b
-1	0
1	1
drop table t1;
set sql_warnings = 0;
# BINARY
set sql_warnings = 1;
create table t1 (a varchar(10), b virtual varbinary(10) as (binary a));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` VIRTUAL varbinary(10) AS (binary a)
) ENGINE=InnoDB
insert into t1 values ('11',default);
insert into t1 values (1,default);
select * from t1;
a	b
11	11
1	1
drop table t1;
set sql_warnings = 0;
# DIV
set sql_warnings = 1;
create table t1 (a int, b virtual int as (a div 5));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL int AS (a div 5)
) ENGINE=InnoDB
insert into t1 values (1,default);
insert into t1 values (7,default);
select * from t1;
a	b
1	0
7	1
drop table t1;
set sql_warnings = 0;
# <=>
set sql_warnings = 1;
create table t1 (a int, b int, c virtual bool as (a <=> b));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` int,
  `c` VIRTUAL tinyint(1) AS (a <=> b)
) ENGINE=InnoDB
insert into t1 values (1,1,default);
insert into t1 values (NULL,NULL,default);
insert into t1 values (1,NULL,default);
select * from t1;
a	b	c
1	1	1
NULL	NULL	1
1	NULL	0
drop table t1;
set sql_warnings = 0;
# =
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual bool as (a=b));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL tinyint(1) AS (a=b)
) ENGINE=InnoDB
insert into t1 values ('a','b',default);
insert into t1 values ('a','a',default);
select * from t1;
a	b	c
a	b	0
a	a	1
drop table t1;
set sql_warnings = 0;
# >=
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual bool as (a >= b));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL tinyint(1) AS (a >= b)
) ENGINE=InnoDB
insert into t1 values ('a','b',default);
insert into t1 values ('a','a',default);
select * from t1;
a	b	c
a	b	0
a	a	1
drop table t1;
set sql_warnings = 0;
# >
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual bool as (a > b));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL tinyint(1) AS (a > b)
) ENGINE=InnoDB
insert into t1 values ('a','b',default);
insert into t1 values ('a','a',default);
select * from t1;
a	b	c
a	b	0
a	a	0
drop table t1;
set sql_warnings = 0;
# IS NOT NULL
set sql_warnings = 1;
create table t1 (a int, b virtual bool as (a is not null));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL tinyint(1) AS (a is not null)
) ENGINE=InnoDB
insert into t1 values (1,default);
insert into t1 values (NULL,default);
select * from t1;
a	b
1	1
NULL	0
drop table t1;
set sql_warnings = 0;
# IS NULL
set sql_warnings = 1;
create table t1 (a int, b virtual bool as (a is null));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL tinyint(1) AS (a is null)
) ENGINE=InnoDB
insert into t1 values (1,default);
insert into t1 values (NULL,default);
select * from t1;
a	b
1	0
NULL	1
drop table t1;
set sql_warnings = 0;
# <=
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual bool as (a <= b));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL tinyint(1) AS (a <= b)
) ENGINE=InnoDB
insert into t1 values ('b','a',default);
insert into t1 values ('b','b',default);
insert into t1 values ('b','c',default);
select * from t1;
a	b	c
b	a	0
b	b	1
b	c	1
drop table t1;
set sql_warnings = 0;
# <
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual bool as (a < b));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL tinyint(1) AS (a < b)
) ENGINE=InnoDB
insert into t1 values ('b','a',default);
insert into t1 values ('b','b',default);
insert into t1 values ('b','c',default);
select * from t1;
a	b	c
b	a	0
b	b	0
b	c	1
drop table t1;
set sql_warnings = 0;
# NOT BETWEEN ... AND ...
set sql_warnings = 1;
create table t1 (a int, b virtual bool as (a not between 0 and 2));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL tinyint(1) AS (a not between 0 and 2)
) ENGINE=InnoDB
insert into t1 values (-1,default);
insert into t1 values (1,default);
select * from t1;
a	b
-1	1
1	0
drop table t1;
set sql_warnings = 0;
# <>
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual bool as (a <> b));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL tinyint(1) AS (a <> b)
) ENGINE=InnoDB
insert into t1 values ('b','a',default);
insert into t1 values ('b','b',default);
insert into t1 values ('b','c',default);
select * from t1;
a	b	c
b	a	1
b	b	0
b	c	1
drop table t1;
set sql_warnings = 0;
# !=
set sql_warnings = 1;
create table t1 (a varchar(10), b varchar(10), c virtual bool as (a != b));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(10),
  `b` varchar(10),
  `c` VIRTUAL tinyint(1) AS (a != b)
) ENGINE=InnoDB
insert into t1 values ('b','a',default);
insert into t1 values ('b','b',default);
insert into t1 values ('b','c',default);
select * from t1;
a	b	c
b	a	1
b	b	0
b	c	1
drop table t1;
set sql_warnings = 0;
# OR
set sql_warnings = 1;
create table t1 (a int, b virtual int as (a>5 or a<3));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL int AS (a>5 or a<3)
) ENGINE=InnoDB
insert into t1 values (1,default);
insert into t1 values (4,default);
select * from t1;
a	b
1	1
4	0
drop table t1;
set sql_warnings = 0;
# XOR
set sql_warnings = 1;
create table t1 (a int, b virtual int as (a xor 5));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL int AS (a xor 5)
) ENGINE=InnoDB
insert into t1 values (0,default);
insert into t1 values (1,default);
insert into t1 values (2,default);
select * from t1;
a	b
0	1
1	0
2	0
drop table t1;
set sql_warnings = 0;
#
# DATE AND TIME FUNCTIONS
#
# ADDDATE()
set sql_warnings = 1;
create table t1 (a datetime, b virtual datetime as (adddate(a,interval 1 month)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL datetime AS (adddate(a,interval 1 month))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	2008-09-30 00:00:00
drop table t1;
set sql_warnings = 0;
# ADDTIME()
set sql_warnings = 1;
create table t1 (a datetime, b virtual datetime as (addtime(a,'02:00:00')));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL datetime AS (addtime(a,'02:00:00'))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	2008-08-31 02:00:00
drop table t1;
set sql_warnings = 0;
# DATE_ADD()
set sql_warnings = 1;
create table t1 (a datetime, b virtual datetime as (date_add(a,interval 1 month)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL datetime AS (date_add(a,interval 1 month))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	2008-09-30 00:00:00
drop table t1;
set sql_warnings = 0;
# DATE_FORMAT()
set sql_warnings = 1;
create table t1 (a datetime, b virtual varchar(64) as (date_format(a,'%W %M %D')));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL varchar(64) AS (date_format(a,'%W %M %D'))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	Sunday August 31st
drop table t1;
set sql_warnings = 0;
# DATE_SUB()
set sql_warnings = 1;
create table t1 (a datetime, b virtual datetime as (date_sub(a,interval 1 month)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL datetime AS (date_sub(a,interval 1 month))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	2008-07-31 00:00:00
drop table t1;
set sql_warnings = 0;
# DATE()
set sql_warnings = 1;
create table t1 (a datetime, b virtual datetime as (date(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL datetime AS (date(a))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31 02:00:00',default);
select * from t1;
a	b
2008-08-31 02:00:00	2008-08-31 00:00:00
drop table t1;
set sql_warnings = 0;
# DATEDIFF()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (datediff(a,'2000-01-01')));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (datediff(a,'2000-01-01'))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	3165
drop table t1;
set sql_warnings = 0;
# DAY()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (day(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (day(a))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	31
drop table t1;
set sql_warnings = 0;
# DAYNAME()
set sql_warnings = 1;
create table t1 (a datetime, b virtual varchar(10) as (dayname(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL varchar(10) AS (dayname(a))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	Sunday
drop table t1;
set sql_warnings = 0;
# DAYOFMONTH()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (dayofmonth(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (dayofmonth(a))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	31
drop table t1;
set sql_warnings = 0;
# DAYOFWEEK()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (dayofweek(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (dayofweek(a))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	1
drop table t1;
set sql_warnings = 0;
# DAYOFYEAR()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (dayofyear(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (dayofyear(a))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	244
drop table t1;
set sql_warnings = 0;
# EXTRACT
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (extract(year from a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (extract(year from a))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	2008
drop table t1;
set sql_warnings = 0;
# FROM_DAYS()
set sql_warnings = 1;
create table t1 (a int, b virtual datetime as (from_days(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL datetime AS (from_days(a))
) ENGINE=InnoDB
insert into t1 values (730669,default);
select * from t1;
a	b
730669	2000-07-03 00:00:00
drop table t1;
set sql_warnings = 0;
# FROM_UNIXTIME()
set sql_warnings = 1;
create table t1 (a int, b virtual datetime as (from_unixtime(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL datetime AS (from_unixtime(a))
) ENGINE=InnoDB
insert into t1 values (1196440219,default);
select * from t1;
a	b
1196440219	2007-11-30 19:30:19
drop table t1;
set sql_warnings = 0;
# GET_FORMAT()
set sql_warnings = 1;
create table t1 (a datetime, b virtual varchar(32) as (date_format(a,get_format(DATE,'EUR'))));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL varchar(32) AS (date_format(a,get_format(DATE,'EUR')))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	31.08.2008
drop table t1;
set sql_warnings = 0;
# HOUR()
set sql_warnings = 1;
create table t1 (a time, b virtual int as (hour(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` time,
  `b` VIRTUAL int AS (hour(a))
) ENGINE=InnoDB
insert into t1 values ('10:05:03',default);
select * from t1;
a	b
10:05:03	10
drop table t1;
set sql_warnings = 0;
# LAST_DAY()
set sql_warnings = 1;
create table t1 (a datetime, b virtual datetime as (last_day(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL datetime AS (last_day(a))
) ENGINE=InnoDB
insert into t1 values ('2003-02-05',default);
select * from t1;
a	b
2003-02-05 00:00:00	2003-02-28 00:00:00
drop table t1;
set sql_warnings = 0;
# MAKEDATE()
set sql_warnings = 1;
create table t1 (a int, b virtual datetime as (makedate(a,1)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL datetime AS (makedate(a,1))
) ENGINE=InnoDB
insert into t1 values (2001,default);
select * from t1;
a	b
2001	2001-01-01 00:00:00
drop table t1;
set sql_warnings = 0;
# MAKETIME()
set sql_warnings = 1;
create table t1 (a int, b virtual time as (maketime(a,1,3)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL time AS (maketime(a,1,3))
) ENGINE=InnoDB
insert into t1 values (12,default);
select * from t1;
a	b
12	12:01:03
drop table t1;
set sql_warnings = 0;
# MICROSECOND()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (microsecond(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (microsecond(a))
) ENGINE=InnoDB
insert into t1 values ('2009-12-31 12:00:00.123456',default);
insert into t1 values ('2009-12-31 23:59:59.000010',default);
select * from t1;
a	b
2009-12-31 12:00:00	0
2009-12-31 23:59:59	0
drop table t1;
set sql_warnings = 0;
# MINUTE()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (minute(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (minute(a))
) ENGINE=InnoDB
insert into t1 values ('2009-12-31 23:59:59.000010',default);
select * from t1;
a	b
2009-12-31 23:59:59	59
drop table t1;
set sql_warnings = 0;
# MONTH()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (month(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (month(a))
) ENGINE=InnoDB
insert into t1 values ('2009-12-31 23:59:59.000010',default);
select * from t1;
a	b
2009-12-31 23:59:59	12
drop table t1;
set sql_warnings = 0;
# MONTHNAME()
set sql_warnings = 1;
create table t1 (a datetime, b virtual varchar(16) as (monthname(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL varchar(16) AS (monthname(a))
) ENGINE=InnoDB
insert into t1 values ('2009-12-31 23:59:59.000010',default);
select * from t1;
a	b
2009-12-31 23:59:59	December
drop table t1;
set sql_warnings = 0;
# PERIOD_ADD()
set sql_warnings = 1;
create table t1 (a int, b virtual int as (period_add(a,2)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL int AS (period_add(a,2))
) ENGINE=InnoDB
insert into t1 values (200801,default);
select * from t1;
a	b
200801	200803
drop table t1;
set sql_warnings = 0;
# PERIOD_DIFF()
set sql_warnings = 1;
create table t1 (a int, b int, c virtual int as (period_diff(a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` int,
  `c` VIRTUAL int AS (period_diff(a,b))
) ENGINE=InnoDB
insert into t1 values (200802,200703,default);
select * from t1;
a	b	c
200802	200703	11
drop table t1;
set sql_warnings = 0;
# QUARTER()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (quarter(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (quarter(a))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	3
drop table t1;
set sql_warnings = 0;
# SEC_TO_TIME()
set sql_warnings = 1;
create table t1 (a int, b virtual time as (sec_to_time(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL time AS (sec_to_time(a))
) ENGINE=InnoDB
insert into t1 values (2378,default);
select * from t1;
a	b
2378	00:39:38
drop table t1;
set sql_warnings = 0;
# SECOND()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (second(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (second(a))
) ENGINE=InnoDB
insert into t1 values ('10:05:03',default);
select * from t1;
a	b
2010-05-03 00:00:00	0
drop table t1;
set sql_warnings = 0;
# STR_TO_DATE()
set sql_warnings = 1;
create table t1 (a varchar(64), b virtual datetime as (str_to_date(a,'%m/%d/%Y')));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(64),
  `b` VIRTUAL datetime AS (str_to_date(a,'%m/%d/%Y'))
) ENGINE=InnoDB
insert into t1 values ('04/30/2004',default);
select * from t1;
a	b
04/30/2004	2004-04-30 00:00:00
drop table t1;
set sql_warnings = 0;
# SUBDATE()
set sql_warnings = 1;
create table t1 (a datetime, b virtual datetime as (subdate(a,interval 1 month)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL datetime AS (subdate(a,interval 1 month))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	2008-07-31 00:00:00
drop table t1;
set sql_warnings = 0;
# SUBTIME()
set sql_warnings = 1;
create table t1 (a datetime, b virtual datetime as (subtime(a,'02:00:00')));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL datetime AS (subtime(a,'02:00:00'))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31',default);
select * from t1;
a	b
2008-08-31 00:00:00	2008-08-30 22:00:00
drop table t1;
set sql_warnings = 0;
# TIME_FORMAT()
set sql_warnings = 1;
create table t1 (a datetime, b virtual varchar(32) as (time_format(a,'%r')));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL varchar(32) AS (time_format(a,'%r'))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31 02:03:04',default);
select * from t1;
a	b
2008-08-31 02:03:04	02:03:04 AM
drop table t1;
set sql_warnings = 0;
# TIME_TO_SEC()
set sql_warnings = 1;
create table t1 (a time, b virtual int as (time_to_sec(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` time,
  `b` VIRTUAL int AS (time_to_sec(a))
) ENGINE=InnoDB
insert into t1 values ('22:23:00',default);
select * from t1;
a	b
22:23:00	80580
drop table t1;
set sql_warnings = 0;
# TIME()
set sql_warnings = 1;
create table t1 (a datetime, b virtual time as (time(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL time AS (time(a))
) ENGINE=InnoDB
insert into t1 values ('2008-08-31 02:03:04',default);
select * from t1;
a	b
2008-08-31 02:03:04	02:03:04
drop table t1;
set sql_warnings = 0;
# TIMEDIFF()
set sql_warnings = 1;
create table t1 (a datetime, b datetime, c virtual int as (timediff(a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` datetime,
  `c` VIRTUAL int AS (timediff(a,b))
) ENGINE=InnoDB
insert into t1 values ('2008-12-31 23:59:59.000001','2008-12-30 01:01:01.000002',default);
Warnings:
Warning	1265	Data truncated for column 'c' at row 1
select * from t1;
a	b	c
2008-12-31 23:59:59	2008-12-30 01:01:01	46
drop table t1;
set sql_warnings = 0;
# TIMESTAMP()
set sql_warnings = 1;
create table t1 (a datetime, b virtual timestamp as (timestamp(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL timestamp AS (timestamp(a)) NULL ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB
insert into t1 values ('2008-12-31',default);
select * from t1;
a	b
2008-12-31 00:00:00	2008-12-31 00:00:00
drop table t1;
set sql_warnings = 0;
# TIMESTAMPADD()
set sql_warnings = 1;
create table t1 (a datetime, b virtual timestamp as (timestampadd(minute,1,a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL timestamp AS (timestampadd(minute,1,a)) NULL ON UPDATE CURRENT_TIMESTAMP
) ENGINE=InnoDB
insert into t1 values ('2003-01-02',default);
select * from t1;
a	b
2003-01-02 00:00:00	2003-01-02 00:01:00
drop table t1;
set sql_warnings = 0;
# TIMESTAMPDIFF()
set sql_warnings = 1;
create table t1 (a timestamp, b timestamp, c virtual int as (timestampdiff(MONTH, a,b)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  `b` timestamp NOT NULL,
  `c` VIRTUAL int AS (timestampdiff(MONTH, a,b))
) ENGINE=InnoDB
insert into t1 values ('2003-02-01','2003-05-01',default);
select * from t1;
a	b	c
2003-02-01 00:00:00	2003-05-01 00:00:00	3
drop table t1;
set sql_warnings = 0;
# TO_DAYS()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (to_days(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (to_days(a))
) ENGINE=InnoDB
insert into t1 values ('2007-10-07',default);
select * from t1;
a	b
2007-10-07 00:00:00	733321
drop table t1;
set sql_warnings = 0;
# WEEK()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (week(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (week(a))
) ENGINE=InnoDB
insert into t1 values ('2008-09-01',default);
select * from t1;
a	b
2008-09-01 00:00:00	35
drop table t1;
set sql_warnings = 0;
# WEEKDAY()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (weekday(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (weekday(a))
) ENGINE=InnoDB
insert into t1 values ('2008-09-01',default);
select * from t1;
a	b
2008-09-01 00:00:00	0
drop table t1;
set sql_warnings = 0;
# WEEKOFYEAR()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (weekofyear(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (weekofyear(a))
) ENGINE=InnoDB
insert into t1 values ('2008-09-01',default);
select * from t1;
a	b
2008-09-01 00:00:00	36
drop table t1;
set sql_warnings = 0;
# YEAR()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (year(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (year(a))
) ENGINE=InnoDB
insert into t1 values ('2008-09-01',default);
select * from t1;
a	b
2008-09-01 00:00:00	2008
drop table t1;
set sql_warnings = 0;
# YEARWEEK()
set sql_warnings = 1;
create table t1 (a datetime, b virtual int as (yearweek(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` datetime,
  `b` VIRTUAL int AS (yearweek(a))
) ENGINE=InnoDB
insert into t1 values ('2008-09-01',default);
select * from t1;
a	b
2008-09-01 00:00:00	200835
drop table t1;
set sql_warnings = 0;
#
# FULL TEXT SEARCH FUNCTIONS
#
# None.
#
# CAST FUNCTIONS AND OPERATORS
#
# CAST()
set sql_warnings = 1;
create table t1 (a int, b virtual int as (cast(a as unsigned)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL int AS (cast(a as unsigned))
) ENGINE=InnoDB
insert into t1 values (1,default);
insert into t1 values (-1,default);
Warnings:
Warning	1264	Out of range value for column 'b' at row 1
select * from t1;
a	b
1	1
-1	2147483647
drop table t1;
set sql_warnings = 0;
# Convert()
set sql_warnings = 1;
create table t1 (a int, b virtual int as (convert(a,unsigned)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL int AS (convert(a,unsigned))
) ENGINE=InnoDB
insert into t1 values (1,default);
insert into t1 values (-1,default);
Warnings:
Warning	1264	Out of range value for column 'b' at row 1
select * from t1;
a	b
1	1
-1	2147483647
drop table t1;
set sql_warnings = 0;
#
# OTHER FUNCTIONS
#
# BIT_COUNT()
set sql_warnings = 1;
create table t1 (a int, b virtual int as (bit_count(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` int,
  `b` VIRTUAL int AS (bit_count(a))
) ENGINE=InnoDB
insert into t1 values (5,default);
select * from t1;
a	b
5	2
drop table t1;
set sql_warnings = 0;
# COERCIBILITY()
set sql_warnings = 1;
create table t1 (a varchar(1024), b virtual int as (coercibility(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(1024),
  `b` VIRTUAL int AS (coercibility(a))
) ENGINE=InnoDB
insert into t1 values ('abc',default);
select * from t1;
a	b
abc	2
drop table t1;
set sql_warnings = 0;
# COLLATION()
set sql_warnings = 1;
create table t1 (a varchar(1024), b virtual varchar(1024) as (collation(a)));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(1024),
  `b` VIRTUAL varchar(1024) AS (collation(a))
) ENGINE=InnoDB
insert into t1 values ('abc',default);
select * from t1;
a	b
abc	utf8_general_ci
drop table t1;
set sql_warnings = 0;
# DEFAULT()
set sql_warnings = 1;
create table t1 (a varchar(1024) default 'aaa', b virtual varchar(1024) as (ifnull(a,default(a))));
show create table t1;
Table	Create Table
t1	CREATE TABLE `t1` (
  `a` varchar(1024),
  `b` VIRTUAL varchar(1024) AS (ifnull(a,default(a)))
) ENGINE=InnoDB
insert into t1 values ('any value',default);
select * from t1;
a	b
any value	any value
drop table t1;
set sql_warnings = 0;
DROP TABLE IF EXISTS t1,t2,t3;
set sql_warnings = 0;
