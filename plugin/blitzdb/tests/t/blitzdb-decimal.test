# Test routine for the DECIMAL Type in BlitzDB

--disable_warnings
drop table if exists t1, t2;
--enable_warnings

# Basic operations on an indexless table
create table t1 (a decimal, b decimal) engine = blitzdb;
insert into t1 values (1,0);
insert into t1 values (1,1);
insert into t1 values (1,2);
insert into t1 values (1,4);
insert into t1 values (1,8);
select * from t1;
select * from t1 where b <= 2;
drop table t1;

# Test the max number of possible digits
create table t2 (a decimal(65,0)) engine = blitzdb;
insert into t2 select repeat(1, 65);
--error 1264
insert into t2 select repeat(1, 66);
select * from t2;
drop table t2;

create table t2 (a decimal(65,8)) engine = blitzdb;
insert into t2 select repeat(1, 57);
--error 1264
insert into t2 select repeat(1, 58);

delete from t2;

--error 1264 # Out of Range
insert into t2 values (
  -1111111111111111111111111111111111111111111111111111111111
);

insert into t2 values (
  1111111111111111111111111111111111111111111111111.11111111
);

--error 1265 # Truncated
insert into t2 values (
  111111111111111111111111111111111111111111111111.111111111
);

select * from t2;
drop table t2;
