DROP TABLE IF EXISTS t1, t2;
CREATE TABLE t1 (
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
, padding VARCHAR(200) NOT NULL
) ENGINE=InnoDB;
INSERT INTO t1 VALUES (1, "I love testing.");
INSERT INTO t1 VALUES (2, "I hate testing.");
REPLACE INTO t1 VALUE (2, "I love testing.");
DROP TABLE t1;
CREATE TABLE t1 (
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
, padding VARCHAR(200) NOT NULL
) ENGINE=InnoDB;
CREATE TABLE t2 (
id INT NOT NULL AUTO_INCREMENT PRIMARY KEY
, fk_id INT NOT NULL
, CONSTRAINT fk_t1 FOREIGN KEY (fk_id) REFERENCES t1 (id) ON DELETE CASCADE
) ENGINE=InnoDB;
INSERT INTO t1 VALUES (1, "I love testing.");
INSERT INTO t1 VALUES (2, "I hate testing.");
REPLACE INTO t1 VALUE (2, "I love testing.");
DROP TABLE t2, t1;
START TRANSACTION;
DROP TABLE IF EXISTS `test`.`t1`;
COMMIT;
START TRANSACTION;
DROP TABLE IF EXISTS `test`.`t2`;
COMMIT;
START TRANSACTION;
CREATE TABLE t1 ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY , padding VARCHAR(200) NOT NULL ) ENGINE=InnoDB;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (1,'I love testing.');
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (2,'I hate testing.');
COMMIT;
START TRANSACTION;
UPDATE `test`.`t1` SET `padding`='I love testing.' WHERE `id`=2;
COMMIT;
START TRANSACTION;
DROP TABLE `test`.`t1`;
COMMIT;
START TRANSACTION;
CREATE TABLE t1 ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY , padding VARCHAR(200) NOT NULL ) ENGINE=InnoDB;
COMMIT;
START TRANSACTION;
CREATE TABLE t2 ( id INT NOT NULL AUTO_INCREMENT PRIMARY KEY , fk_id INT NOT NULL , CONSTRAINT fk_t1 FOREIGN KEY (fk_id) REFERENCES t1 (id) ON DELETE CASCADE ) ENGINE=InnoDB;
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (1,'I love testing.');
COMMIT;
START TRANSACTION;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (2,'I hate testing.');
COMMIT;
START TRANSACTION;
DELETE FROM `test`.`t1` WHERE `id`=2;
INSERT INTO `test`.`t1` (`id`,`padding`) VALUES (2,'I love testing.');
COMMIT;
START TRANSACTION;
DROP TABLE `test`.`t2`;
COMMIT;
START TRANSACTION;
DROP TABLE `test`.`t1`;
COMMIT;
SET GLOBAL transaction_log_truncate_debug= true;
