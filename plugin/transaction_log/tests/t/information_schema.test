#
# Tests the DATA_DICTIONARY views which come with the transaction
# log
#

# Truncate the log file to reset for the next test
--source ../plugin/transaction_log/tests/t/truncate_log.inc

# Populate log with some records...
--source ../plugin/transaction_log/tests/t/insert.inc

# Query the DATA_DICTIONARY views and verify
# that the information contained in them matches
# the transaction log.

--replace_column 2 X 7 X 8 X 9 X
SELECT * FROM DATA_DICTIONARY.TRANSACTION_LOG;
--replace_column 1 X 3 X
SELECT * FROM DATA_DICTIONARY.TRANSACTION_LOG_ENTRIES;
--replace_column 1 X 4 X 5 X
SELECT * FROM DATA_DICTIONARY.TRANSACTION_LOG_TRANSACTIONS;

# Verify that the transaction_log_enable sysvar can not be modified
SET GLOBAL transaction_log_enable= false;
SHOW VARIABLES LIKE 'transaction_log_enable';

# Truncate the log file to reset for the next test
--source ../plugin/transaction_log/tests/t/truncate_log.inc
