# We will test to make sure that locks are being held correctly across
# sessions.

SELECT GET_LOCK("mine");
SELECT USER_NAME, USER_LOCK_NAME FROM DATA_DICTIONARY.USER_LOCKS;
CREATE TABLE lock_state (a int);
EXECUTE "INSERT INTO lock_state SELECT GET_LOCK(\"mine\", 20)" CONCURRENT;
#SELECT USER  FROM DATA_DICTIONARY.PROCESSLIST;
# This should have zero rows in it
#SELECT count(*) FROM lock_state;
SELECT RELEASE_LOCK(@LOCK);
DROP TABLE lock_state;
